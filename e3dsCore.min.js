(()=>{var e;function t(t){clearTimeout(e),e=setTimeout((function(){W()}),500)}function n(e,t){i(JSON.stringify({type:"xirsysResponse",responseText:JSON.stringify({})}))}var o=void 0;function i(e){if(clearTimeout(o),Ht&&Ht.readyState===Gt){if(console.log("xirsys ws.send(): "+JSON.stringify(e)),Ht.send(e),!qt){var t=e,n=JSON.parse(t),a=JSON.parse(n.responseText);if(console.log("client xirsysResponse obj:  "+JSON.stringify(a)),null==a.v)return;var r={iceServers:[{username:a.v.iceServers.username,credential:a.v.iceServers.credential,urls:a.v.iceServers.urls}]};console.log("client xirysGeoLocationBasedTurnSever :  "+JSON.stringify(r)),qt||(qt=new En({peerConnectionOptions:r})),Dt||(Dt=document.createElement("Audio"))}}else o=setTimeout((function(){i(e)}),1e3)}var a=void 0;function r(){a.style.width=2+a.value.length+"ch",console.log("onchangehiddenInputText : "+a.style.width)}function l(e){return e>=112&&e<=123||9===e}new Map,setInterval((function(){a&&console.log("1111  hiddenInput.style.display : "+a.style.display)}),1e3);const s={BackSpace:8,Shift:16,Control:17,Alt:18,RightShift:253,RightControl:254,RightAlt:255};function c(e){return e.keyCode===s.Shift&&"ShiftRight"===e.code?s.RightShift:e.keyCode===s.Control&&"ControlRight"===e.code?s.RightControl:e.keyCode===s.Alt&&"AltRight"===e.code?s.RightAlt:e.keyCode}function d(){var e=document.getElementById("streamingVideo");if(e){var t=document.getElementById("AudioBtnImg");t&&(t.src=e.muted?"https://d35e1ftufisrhj.cloudfront.net/v1/assets/images/UIimages/mute.svg":"https://d35e1ftufisrhj.cloudfront.net/v1/assets/images/UIimages/unmute.svg",console.log(t.src))}}function u(e){console.log("setVolume val: "+e);var t=document.getElementById("streamingVideo");t.volume=e,console.log("streamingVideo.volume: "+t.volume),Dt||(Dt=document.getElementById("Audio")),Dt.volume=e,console.log("audioElem.volume: "+Dt.volume)}function g(){if(Nt){console.log("11111111111111 unMuteAudio4AutoPlay");var e=document.getElementById("streamingVideo");e&&e.muted&&(Nt=!1,function(e){var t=document.getElementById("streamingVideo");if(Ze(t,e),console.log("streamingVideo.muted: "+t.muted),Dt||(Dt=document.getElementById("Audio")),Dt&&(Ze(Dt,e),console.log("audioElem2.muted: "+Dt.muted)),!e&&(Dt||(Dt=document.createElement("Audio")),Dt)){Dt.autoplay=!0,null!=Rt&&(Dt.srcObject=Rt);var n=Dt.play();void 0!==n&&n.then((()=>{console.log("switchAudioTo() Created new audio element to play seperate audio stream.")})).catch((e=>{console.warn("Autoplay  audio was prevented.deleting audioElem "),delete Dt}))}console.log("11111111111111 streamingVideo.muted ="+t.muted),d()}(!document.getElementById("streamingVideo").muted))}}function m(e){window.top.postMessage(e,"*")}function f(e){if(console.log(" handleUnrealResponse(descriptor) : "+e),"function"==typeof onResponseFromUnreal?onResponseFromUnreal(e):console.log("not found onResponseFromUnreal"),e3ds_controller.callbacks&&"function"==typeof e3ds_controller.callbacks.onResponseFromUnreal?e3ds_controller.callbacks.onResponseFromUnreal(e):console.log("not found e3ds_controller.callbacks.onResponseFromUnreal"),window.top.postMessage(e,"*"),"getCmdLineArgs"===e){let e={};e.cmdLineArgs=en,console.log("33333333333333 sendDataToUE4App emitUIInteraction: "+JSON.stringify(e)),b(e)}else{let t;try{t=JSON.parse(e),console.log("5555555555555 handleUnrealResponse JSON.stringify(JSON.parse(descriptor)) : "+JSON.stringify(t))}catch(e){console.log("5555555555555 handleUnrealResponse JSON.parse fails")}!function(e){var t;if(console.log("5555555555555 ahsanHandleResponseFunction(obj) :"+JSON.stringify(e)),null!=e)switch(console.log("5555555555555 ahsanHandleResponseFunction obj.cmd :"+e.cmd),e.cmd){case"misctasks":W();break;case"takeFocusedWidgetText_old":p&&(p=!1,r(),e.value);break;case"takeFocusedWidgetText":p&&(p=!1,a.value=e.value,a.style.display="block",r(),a.focus());break;case"getCmdLineArgs":{let e={};e.cmdLineArgs=en,console.log("33333333333333 sendDataToUE4App emitUIInteraction: "+JSON.stringify(e)),b(e)}break;case"getIpaddress":{let e={Ipaddress:"contactAhsanASAP"};console.log("33333333333333 sendDataToUE4App emitUIInteraction: "+JSON.stringify(e)),b(e)}break;case"redirectTo":window.location.href=e.value;break;case"lunchKeyBoard":if(e.isFoused){var n=document.getElementById("textaaa");n||showError("elem is null"),ShowOverlayAhsan(),n.value=e.currentText,n.focus()}else console.log("not isFoused");break;case"sendLocalFileToUE4":!function(e){console.log("Browsing");const t=document.createElement("input");t.setAttribute("type","file"),t.style.display="none",document.getElementsByTagName("body")[0].appendChild(t),t.addEventListener("change",(()=>{const n=t.files[0];no=n,console.log("file",n),function(e,t,n,o,i){var a={type:"getUploadUrl",content_type:e,owner:n,appName:t,file_name:o,pathToSaveFile:i};console.log(JSON.stringify(a)),Ht.send(JSON.stringify(a))}(n.type,pt,fe,n.name,e)})),t.click()}(e.pathToSaveFile);break;case"ToggleBrowserMouse":Bt=!Bt,Wt();break;case"showBrowserMouse":Bt=!0,Wt();break;case"hideBrowserMouse":Bt=!1,Wt();break;case"lunchCallApp":console.log(e.value),window.open("tel:"+e.value,"_self");break;case"lunchMailApp":var o="mailto:"+e.value+"?subject="+e.value+"&body="+e.value;window.open(o,"_blank");break;case"sendDeviceInfo":b({type:"takeUserDeviceInfo",userDeviceInfo:Zt});break;case"sendUserInfoInPlainJson":let l={};l=kt,b(l);break;case"sendUserInfo":b({clientInfo:kt});break;case"generateDownloadableCSV":console.log(JSON.stringify(e.value)),function(e,t){for(var n=function(e){for(var t="",n=0;n<e.length;n++){var o=null===e[n]?"":e[n].toString();e[n]instanceof Date&&(o=e[n].toLocaleString());var i=o.replace(/"/g,'""');i.search(/("|,|\n)/g)>=0&&(i='"'+i+'"'),n>0&&(t+=","),t+=i}return t+"\n"},o="",i=0;i<t.length;i++)o+=n(t[i]);console.log("5555555555555 csvFile content :"+o),console.log("5555555555555 csvFile filename :"+e);var a=new Blob([o],{type:"text/csv;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(a,e);else{var r=document.createElement("a");if(void 0!==r.download){var l=URL.createObjectURL(a);r.setAttribute("href",l),r.setAttribute("download",e),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}}}(e.filename,e.csvRows);break;case"captureScreenShot":Mn();break;case"toggleFullscreen":Cn();break;case"enterFullscreen":xn();break;case"exitFullscreen":On();break;case"ForeceEndTab":try{if(!window.close)throw new Error("window.close is not supported");if(window.close(),!window.closed)throw new Error("Failed to close the window")}catch(e){console.error("Error:",e),et("Denied. Scripts may close only the windows that were opened by them.",{color:"red",timeout:5e3})}break;case"ForeceEndSession":console.log("ForeceEndSession diderrorhappend:",We),We?console.log(" no error"):window.location="/assets/pages/SessionEnded.htm";break;case"setVolume":console.log(e.value),u(e.value);break;case"askChatGpt":!async function(e){var t={type:"askChatGpt",question:e};console.log(JSON.stringify(t)),Ht.send(JSON.stringify(t))}(e.value);break;case"doInAppPurchase":!function(e){var t="https://"+me.domain+":"+me.httpsPort+"/inAppPurchaseResult/";const n=lt.ue4AppExe,o=n.match(/([^\\]+)\.exe$/)[1],i=n.replace(/[^\\]+\.exe$/,""),a=n.match(/\\(\d+)\\/)[1];console.log("Exe Name:",o),console.log("Path:",i),console.log("Number 13:",a);var r={owner:fe,currency:"USD",amount:e.value,reportingUrl:t,href_emulated:ge,exe:o,v:a,timeOfInitiation:Date.now()},l=JSON.stringify(r);console.log("doenecrytion fsfsf: "+l),x(l)}(e);break;case"sendClipBoardData":!async function(){const e=await navigator.permissions.query({name:"clipboard-read"});if("granted"!==e.state&&"prompt"!==e.state)return console.log("Clipboard Permission denied by user "),void et("Clipboard Permission in browser for this domain denied by user",{color:"red",timeout:5e3});if(document.hasFocus()){if(!navigator.clipboard||!navigator.clipboard.readText)return void console.log("clipboard API not supported in browser");window.navigator.clipboard.readText().then((e=>{if(console.log("sendClipBoardData: "+e),Ht&&Ht.readyState===Gt){var t={type:"setclipboardDataOnStreamerMachine",textToSetclipboardData:e};t=JSON.stringify(t),console.log("setclipboardDataOnStreamerMachine ws.send(): "+t),Ht.send(t)}b({ClipBoardData:e})})).catch((e=>{console.error("Failed to read clipboard data: ",e)}))}else console.log("sendClipBoardData: Page is not in focus")}();break;case"copytoclipboard":!async function(e){const t=await navigator.permissions.query({name:"clipboard-read"});if("granted"!==t.state&&"prompt"!==t.state)return console.log("Clipboard Permission denied by user "),void et("Clipboard Permission in browser for this domain denied by user",{color:"red",timeout:5e3});navigator.clipboard.writeText(e).then((()=>{console.log("Text successfully copied to clipboard")})).catch((e=>{console.error("Unable to copy text to clipboard",e),et("Unable to copy text to clipboard",{color:"red",timeout:5e3})}))}(e.value);break;case"setBrowserSideMouseCursorTo":""!=e.value&&null!=e.value&&(It=e.value),Wt();break;case"launchUrl":case"lunchUrl":console.log(e.value),window.open(e.value,"_blank");break;case"editorModeId":e.value,t=JSON.stringify({type:"sendAllVideoAssetsUrls",owner:fe}),Ht.send(t),console.log(" ws.send(): "+t),t=JSON.stringify({type:"sendAll2dAssetsUrls",owner:fe}),Ht.send(t),console.log(" ws.send(): "+t),document.getElementById("editor-sidebar").style.width="400px";break;case"freezeResolutionAt":B(e.x,e.y);break;case"getDownloadUrlOfLocalFile":var i=JSON.stringify({type:"forwardToEL",objFromUE4:e});Ht&&(console.log(" ws.send(): "+JSON.stringify(i)),Ht.send(i));break;case"downloadLocalFileOnUserDevice":i=JSON.stringify({type:"forwardToEL",objFromUE4:e}),Ht&&(console.log(" ws.send(): "+JSON.stringify(i)),Ht.send(i))}}(t)}}document.addEventListener("keypress",(function(e){g();const t=e.which||e.code;let n=e.key;n||(n=String.fromCharCode(t))})),m({type:"stage3_slotOccupied"});var p=!1;function y(){A(new Uint8Array([w.RequestQualityControl]).buffer)}function v(e,t){var n={ConsoleCommand:"r.setRes "+e+"x"+t};1==ue&&console.log(n),E(n)}function h(e){null!==e.PrioritiseQuality&&b({Console:"Streamer.PrioritiseQuality "+e.PrioritiseQuality}),null!==e.LowBitrate&&b({Console:"Streamer.LowBitrate "+e.LowBitrate}),null!==e.HighBitrate&&b({Console:"Streamer.HighBitrate "+e.HighBitrate}),null!==e.MinFPS&&b({Console:"Streamer.MinFPS "+e.MinFPS})}const w={IFrameRequest:0,RequestQualityControl:1,MaxFpsRequest:2,AverageBitrateRequest:3,StartStreaming:4,StopStreaming:5,LatencyTest:6,RequestInitialSettings:7,UIInteraction:50,Command:51,KeyDown:60,KeyUp:61,KeyPress:62,MouseEnter:70,MouseLeave:71,MouseDown:72,MouseUp:73,MouseMove:74,MouseWheel:75,TouchStart:80,TouchEnd:81,TouchMove:82,GamepadButtonPressed:90,GamepadButtonReleased:91,GamepadAnalog:92};function S(e,t){let n=JSON.stringify(t);1==ue&&console.log("33333333333333 descriptorAsString: "+n);let o=new DataView(new ArrayBuffer(3+2*n.length)),i=0;o.setUint8(i,e),i++,o.setUint16(i,n.length,!0),i+=2;for(let e=0;e<n.length;e++)o.setUint16(i,n.charCodeAt(e),!0),i+=2;A(o.buffer)}function b(e){S(w.UIInteraction,e)}function E(e){S(w.Command,e)}function B(e,t){Ue.resolutionType_ue4="Custom",v(e,t)}function I(e){console.log("receiveCommand: "+JSON.stringify(e));try{const t=JSON.parse(e.data);null!=t.Type?(console.log("Command received, parsed and accepted: %s",e.data),b(t)):"EmulatePlayButtonPressed"==t.cmd?Qn():"freezeResolutionAt"==t.cmd?B(t.x,t.y):"sendToUe4"==t.cmd?b(t.value):"ssitest"==t.cmd?b({requestId:t.requestId,jsonObjecived:JSON.stringify(t)}):console.log("Command received and parsed, but not accepted: %s",e.data)}catch(t){console.log("error receiveCommand(): Command received, but could not parse: "+JSON.stringify(e.data))}}"undefined"!=typeof e3ds_controller&&(e3ds_controller.sendToUnreal=function(e){b(e)});var k=0,T=void 0;function C(e){}function x(e){k++,console.log("--\x3e collectLocationInfoAttempt: "+k);var t="https://account.eagle3dstreaming.com/api/v1/encrypt-string?decryptedString="+e,n=new XMLHttpRequest;n.isDOne=!1,n.onreadystatechange=function(){if(console.log("doenecrytion()  xmlHttp.responseText: "+n.responseText),429==n.status)return null!=T&&clearTimeout(T),void(T=setTimeout(x,2e3));if(422!=n.status)if(""!=n.responseText&&null!=n.responseText&&200==n.status){if(n.isDOne)return;n.isDOne=!0,clearTimeout(T),C(n.responseText);var e="https://payment.eaglepixelstreaming.com/v1/?key="+n.responseText;console.log("doenecrytion: "+e),window.open(e,"_blank")}else null!=T&&clearTimeout(T)},n.open("GET",t,!0);try{n.send(null)}catch(e){console.log("XXXXXXXXXXXXXXXXXXX doenecrytion try catch error : "),console.log(e)}}function O(){qt?(console.log("Creating offer"),zn("Starting connection to server, please wait"),ae(5),qt.createOffer(),clearTimeout(Vn),"undefined"!=typeof e3ds_controller&&(e3ds_controller.terminate=function(){it=!1,_e&&clearInterval(_e),Fe&&clearInterval(Fe),Ht.close()})):(console.log("WebRTC player not setup, cannot create offer"),Zn("Unable to setup video"))}function A(e){const t=function(e){const t=Object.entries(w);for(const[n,o]of t)if(o===e)return n;return null}(new DataView(e).getUint8(0));var n;n={eventType:t},dn()?m(n):e3ds_controller.callbacks&&"function"==typeof e3ds_controller.callbacks.onReceivingDataFromE3DSStreamingUI&&e3ds_controller.callbacks.onReceivingDataFromE3DSStreamingUI(n),$e||vt||qt&&(K(e),qt.send(e))}const P={QualityControlOwnership:0,Response:1,Command:2,FreezeFrame:3,UnfreezeFrame:4,VideoEncoderAvgQP:5,LatencyTest:6,InitialSettings:7};var M,D,R,N,L="N/A",F=1,_=!1;function U(e){_=!0;var t=window.webRtcPlayerObj.pcClient;if(1==F&&(_=!0,console.log("NNNN restartWebRtc step:"+F),navigator.userAgent.includes("Chrome")?t.createOffer().then((e=>(function(e){e.onicecandidate=e=>{e.candidate?Ht&&Ht.readyState===Gt&&(console.log("-> SS: iceCandidate"),Ht.send(JSON.stringify({type:"iceCandidate",candidate:e.candidate}))):console.log("ICE gathering complete")}}(t),t.setLocalDescription(e)))).then((()=>{if(Ht&&Ht.readyState===Gt){let e=JSON.stringify(t.localDescription);console.log(`-> SS: offer:\n${e}`),Ht.send(e)}})).catch((e=>{console.error("Error creating offer:",e)})):console.log("Negotiation restart is not supported in this browser.")),2==F){console.log("NNNN restartWebRtc step:"+F);var n=new RTCSessionDescription(e);t.setRemoteDescription(n).then((()=>{console.log("Remote description set successfully"),F=3,U(e)})).catch((e=>{console.error("Error setting remote description:",e)}))}3==F&&console.log("NNNN restartWebRtc step:"+F)}function J(e){W()}function W(e){var t=document.getElementById("player");t&&(ke&&q(),t.classList.contains("fixed-size")||(function(e){let t=e.getElementsByTagName("VIDEO"),n=window.innerHeight/window.innerWidth,o=e.clientHeight/e.clientWidth,i=t.videoHeight/t.videoWidth;var a;isNaN(i)?(M=window.innerWidth,D=window.innerHeight,a="top: "+(R=0)+"px; left: "+(N=0)+"px; width: "+M+"px; height: "+D+"px; "+xt):n<o?(M=Math.floor(window.innerHeight/i),D=window.innerHeight,R=0,N=Math.floor(.5*(window.innerWidth-M)),a="top: "+R+"px; left: "+N+"px; width: "+M+"px; height: "+D+"px; cursor: "+styleCursor+"; "+xt):(M=window.innerWidth,D=Math.floor(window.innerWidth*i),a="top: "+(R=Math.floor(.5*(window.innerHeight-D)))+"px; left: "+(N=0)+"px; width: "+M+"px; height: "+D+"px; cursor: "+styleCursor+"; "+xt),function(e,t){if(!(nt.length>0)||ke)if(2==Bn||null==gt){e.style=t+";background-image: 'none';",document.getElementsByClassName("loader"),document.getElementById("videoPlayOverlay");var n="#FFFFFFFF";(o=document.getElementById("loaderStep1"))&&(o.style.background=n),(o=document.getElementById("loaderStep2"))&&(o.style.background=n),(o=document.getElementById("loaderStep3"))&&(o.style.background=n)}else if(null!=gt){var o;e.style=t+";background-image: url("+gt+");",n="#FFFFFF00",(o=document.getElementById("loaderStep1")).style.background=n,(o=document.getElementById("loaderStep2")).style.background=n,(o=document.getElementById("loaderStep3")).style.background=n}}(e,a)}(t),ln=t.getBoundingClientRect(),lo(),G()))}var $=!0;function H(){if($){var e=document.getElementById("player");e&&"Dynamic"==Ue.resolutionType_ue4&&v(e.clientWidth,e.clientHeight)}}function q(){if(null==tn)return H(),void(tn=(new Date).getTime());(new Date).getTime()-tn>Le?(H(),tn=(new Date).getTime()):(console.log("Resizing too often - skipping"),clearTimeout(Xt),Xt=setTimeout(q,Le))}var V={receiving:!1,size:0,jpeg:void 0,height:0,width:0,valid:!1};function j(){V.valid&&(on.style.display="block")}function G(){if(0!==V.width&&0!==V.height){let e=0,t=0,n=0,o=0;{let i=window.innerWidth/window.innerHeight,a=V.width/V.height;i<a?(e=window.innerWidth,t=Math.floor(window.innerWidth/a),n=Math.floor(.5*(window.innerHeight-t)),o=0):(e=Math.floor(window.innerHeight*a),t=window.innerHeight,n=0,o=Math.floor(.5*(window.innerWidth-e)))}on.style.width=e+"px",on.style.height=t+"px",on.style.left=o+"px",on.style.top=n+"px"}}var z={enabled:!1,warnTimeout:void 0,closeTimeout:void 0,active:!1,overlay:void 0,warnTimer:void 0,countdown:0,countdownTimer:void 0,runningCountdown:!1,isAfkUiUp:!1};function X(){if(!z.overlay)return;const e=document.getElementById("afk-second-text");e&&z&&(e.innerText=z.countdown),z.overlay.style.display="block"}function Q(){z.runningCountdown=!1,clearInterval(z.countdownTimer),Y(),$e=!1}function Y(){"0"!=Ue.isAfkEnabled?(z.warnTimeout=60*Ue.afkWarnTimeout,z.closeTimeout=60*Ue.afkCloseTimeout,z.active=!0,z.enabled=!0,K()):console.log("AFK is disabled")}function K(e){e&&1===e.byteLength||z.active&&(clearTimeout(z.warnTimer),z.overlay&&(z.overlay.style.display="none",z.isAfkUiUp=!1),z.warnTimer=setTimeout((function(){console.log("Showing afk overlay"),function(){if(z.enabled)if(!isNaN(z.countdown)&&z.warnTimeout>0&&z.warnTimeout<1e3){if(z.countdown=z.closeTimeout,z.isAfkUiUp=!0,$e=!0,Rn.controlScheme==Dn.LockedMouse&&document.exitPointerLock(),clearInterval(z.countdownTimer),z.countdownTimer=setInterval((function(){z.countdown--,0==z.countdown?(Ot=!0,Ht&&Ht.close(4e3,"afk disconnected"),console.log("You have been disconnected for not being active,please refresh the page "),dn()?po("You have been disconnected for not being active,please refresh the page "):po("You have been disconnected for not being active,to start a new session please visit: "+location.href)):X()}),1e3),z.overlay)return X(),void(z.runningCountdown=!0);z.active=!1,z.overlay=document.getElementById("afkOverlay"),function(e,t,n){const o=document.getElementById("player");t&&o.appendChild(t),z.overlay&&n&&z.overlay.addEventListener("click",n),o.classList.add("clickableState")}(0,z.overlay,(e=>{Q()}))}else console.log("AFK ",z.countdown,z.warnTimeout);else console.log("Not showing overlay because afk disabled.")}()}),1e3*z.warnTimeout))}function Z(){Ut<0||(clearTimeout($t),$t=setTimeout((function(){if(window.isAppPreparationprocessGoingOn||ro)return Z(),void console.log("startExpireOnCountDown--\x3e window.isAppPreparationprocessGoingOn: "+window.isAppPreparationprocessGoingOn);it=!1,at=!1,ws4queue_shouldTryToReconnect=!1,oo&&oo.close(4e3,"Timeout_ExpireOnCountDown"),Ht&&Ht.close(4e3,"Timeout_ExpireOnCountDown"),"function"==typeof onSessionExpired?onSessionExpired():e3ds_controller.callbacks&&"function"==typeof e3ds_controller.callbacks.onSessionExpired?e3ds_controller.callbacks.onSessionExpired():dn()?po("Session expired,please refresh the page "):po("Session expired,to start a new session please visit: "+location.href),dn()?po("Session expired,please refresh the page "):po("Session expired,to start a new session please visit: "+location.href)}),Ut))}function ee(){console.log("111111111111  onFirstHumanInteraction()"),Dt&&("success"==Dt.ahsanHack?(window.removeEventListener("touchend",ee),window.removeEventListener("mouseup",ee)):(document.getElementById("streamingVideo").muted=!1,Dt?Sn():we("audioElem not found: ",-937307130),console.log("11111111111111 streamingVideo.muted ="+streamingVideo.muted),d())),1==Ue.doAutoMovement&&generateRandomKeypress()}function te(){if(ne){if(At)document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),At=!1;else{let e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),screen.orientation.lock("landscape"),At=!0}clearInterval(Yt),clearTimeout(Kt),ne=!1}}Date.now();var ne=!1;function oe(e){return e.length>123&&(e=e.substring(0,123)),e}function ie(e,t,n=!0,o=void 0,i=void 0){if(console.trace(),console.log("ForceReloadPageWithproperInfo diderrorhappend:"+We),Pt&&(Pt.domainName,Pt.topLevelDomainName),window.location.href,me.elInfo.instanceId_exeLuncher,me.elInfo.computerName,JSON.stringify(kt),JSON.stringify(lt),JSON.stringify(Zt),n&&Se(e,o),i&&Ht&&Ht.readyState===Gt){const t=function(){const e=new Date;return`${e.getUTCFullYear()}-${String(e.getUTCMonth()+1).padStart(2,"0")}-${String(e.getUTCDate()).padStart(2,"0")}T${String(e.getUTCHours()).padStart(2,"0")}:${String(e.getUTCMinutes()).padStart(2,"0")}:${String(e.getUTCSeconds()).padStart(2,"0")}.000Z`}();var a={href:window.location.href,type:i,msg:e,date:t,cirrusServer:me,appName:pt,owner:fe,clientInfo:kt,ue4ExeInfo:lt,userDeviceInfo:Zt};Ht.send(JSON.stringify({type:"DoFBEntreyofSystemIssue",obj:a})),setTimeout((function(){it=!1,Ht&&Ht.close(4e3,oe("ForceReloadPageWithproperInfo() : "+e))}),1e3)}else it=!1,Ht&&Ht.close(4e3,oe("ForceReloadPageWithproperInfo() : "+e));et(e,{color:"Red"}),setTimeout((function(){location.reload()}),t)}function ae(e){if(!(nt.length>0)){rn+=e,console.log("LunchingProgressAmount:"+rn),e3ds_controller.callbacks&&"function"==typeof e3ds_controller.callbacks.onReceivingAppStartingProgress?e3ds_controller.callbacks.onReceivingAppStartingProgress(rn):console.log("not found e3ds_controller.callbacks.onReceivingAppStartingProgress");var t=document.getElementById("LunchingProgress"),n=document.getElementById("Title_LunchingProgress");window.isAppPreparationprocessGoingOn||n&&(n.style.display="block"),null!==t&&(window.isAppPreparationprocessGoingOn||t&&(t.style.display="block"),t.value=rn)}}function re(e,t){if(e.iceServers.length!==t.iceServers.length)return!1;const n=sortIceServers(e.iceServers),o=sortIceServers(t.iceServers);for(let e=0;e<n.length;e++)if(!le(n[e],o[e]))return!1;return!0}function re(e,t){if(e.iceServers.length!==t.iceServers.length)return!1;for(let n=0;n<e.iceServers.length;n++)if(!le(e.iceServers[n],t.iceServers[n]))return!1;return!0}function le(e,t){if(e.username!==t.username||e.credential!==t.credential)return!1;const n=se(e.urls),o=se(t.urls);return JSON.stringify(n)===JSON.stringify(o)}function se(e){return e.slice().sort()}function ce(e){pe=e,console.log("onConfig config.peerConnectionOptions: "+JSON.stringify(e.peerConnectionOptions)),ae(5);let t=document.getElementById("player");if(qt){console.log(" webRtcPlayerObj.cfg:",qt.cfg),console.log("webRtcPlayerObj.cfg.iceServers:",qt.cfg.iceServers),console.log("config.peerConnectionOptions:",e.peerConnectionOptions),console.log("config.peerConnectionOptions.iceServers:",e.peerConnectionOptions.iceServers),e.peerConnectionOptions.iceServers==qt.cfg.iceServers&&console.log("same");const t=re(e.peerConnectionOptions,qt.cfg);console.log("Are the configurations equal?",t),qt.cfg=e.peerConnectionOptions}else qt=new En({peerConnectionOptions:e.peerConnectionOptions}),Dt||(Dt=document.createElement("Audio"));if(t.appendChild(qt.video),function(e){e&&(function(e){e.onmouseenter=function(t){if(!vt){jt&&console.log("mouse enter:"+e.id);var n=new DataView(new ArrayBuffer(1));n.setUint8(0,w.MouseEnter),A(n.buffer),e.pressMouseButtons(t)}},e.onmouseleave=function(t){if(!vt){jt&&console.log("mouse leave: "+e.id);var n=new DataView(new ArrayBuffer(1));n.setUint8(0,w.MouseLeave),A(n.buffer),e.releaseMouseButtons(t)}}}(e),Gn(e))}(Me),nt.length>0){let e=document.getElementById("skip_video");console.log(Lt),parseInt(Lt)?O():parseInt(Lt)||(document.getElementById("skip_video").style.display="block",null!==e&&(e.onclick=function(e){document.getElementById("skip_video").style.display="none",O()})),null!=St("LoadingScreenSkipButtonText")&&""!=St("LoadingScreenSkipButtonText")&&(document.getElementById("skip_video").innerHTML=St("LoadingScreenSkipButtonText"))}else O();let n=Me;switch(W(),Rn.controlScheme){case Dn.HoveringMouse:!function(e){e.onmousemove=function(e){Nn(e.offsetX,e.offsetY,e.movementX,e.movementY),e.preventDefault()},e.onmousedown=function(e){g(),Fn(e.button,e.offsetX,e.offsetY),e.preventDefault()},e.onmouseup=function(e){g(),_n(e.button,e.offsetX,e.offsetY),e.preventDefault()},e.oncontextmenu=function(e){_n(e.button,e.offsetX,e.offsetY),e.preventDefault()},"onmousewheel"in e?e.onmousewheel=function(e){Un(e.wheelDelta,e.offsetX,e.offsetY),e.preventDefault()}:e.addEventListener("DOMMouseScroll",(function(e){Un(-120*e.detail,e.offsetX,e.offsetY),e.preventDefault()}),!1),e.pressMouseButtons=function(e){Hn(e.buttons,e.offsetX,e.offsetY)},e.releaseMouseButtons=function(e){$n(e.buttons,e.offsetX,e.offsetY)}}(n);break;case Dn.LockedMouse:qn(n);break;default:console.log(`ERROR: Unknown control scheme ${Rn.controlScheme}`),qn(n)}}function de(e){"use strict";Pe();var t=document.getElementById("queueNumberText");t&&(t.style.display="none");var n,o=document.getElementById("videoPlayOverlay");if(o&&(o.style.display="none"),console.log(" connectss cirrusServer:  "+JSON.stringify(e)),console.log("111111111111  load()"),(on=document.createElement("img")).id="freezeFrameOverlay",on.style.display="none",on.style.pointerEvents="none",on.style.position="absolute",on.style.zIndex="30",document.onkeydown=function(e){if(13==e.keyCode&&(z.isAfkUiUp||z.runningCountdown))return Q(),void document.getElementById("afkOverlay").focus();9===e.keyCode&&(e.preventDefault(),e.stopPropagation()),g(),a&&a.value,jt&&console.log(`key down ${e.keyCode}, repeat = ${e.repeat}`),A(new Uint8Array([w.KeyDown,c(e),e.repeat]).buffer),e.keyCode===s.BackSpace&&document.onkeypress({charCode:s.BackSpace}),e.ctrlKey&&e.altKey&&"e"===e.key&&(console.log("111111111111111111111111 keyCode: "+e.keyCode),Mn()),Rn.suppressBrowserKeys&&l(e.keyCode)&&e.preventDefault()},document.onkeyup=function(e){z.isAfkUiUp||(g(),jt&&console.log(`************ key up ${e.keyCode}`),A(new Uint8Array([w.KeyUp,c(e)]).buffer),Rn.suppressBrowserKeys&&l(e.keyCode)&&e.preventDefault())},document.onkeypress=function(e){if(z.isAfkUiUp)return;g(),jt&&console.log(`key press ${e.charCode}`);let t=new DataView(new ArrayBuffer(3));t.setUint8(0,w.KeyPress),t.setUint16(1,e.charCode,!0),A(t.buffer)},n=f,nn.set("responseHandler01",n),!Ot)if(window.WebSocket=window.WebSocket||window.MozWebSocket,window.WebSocket){var i="wss://"+e.domain+"/ws/"+e.httpsPort+"/";console.log(" connectss url:  "+i),(Ht=new WebSocket(i)).onopen=function(t){if(console.log("11111111111111111111 ws.onopen  "),"VrApp"==Ue.platform){var n={type:"vrApp",serverPublicIp:e.elInfo.serverPublicIp,port:3389};console.log("6666666666666 JSON.stringify(josnObj): "+JSON.stringify(n));var o=function(e){var t=JSON.stringify(e);console.log("encryptJosn JSON.stringify(josnObj): "+t);var n=btoa(t);return console.log("encryptJosn btoa: "+n),console.log("encryptJosn atob: "+atob(n)),n}(n),i="e3dsrdp://"+o;console.log("opening Vr connector:"+i),e3ds_alert("opening Vr connector:"+i,{color:"blue"}),window.open(i,"_blank")}},Ht.onmessage=function(t){var n,o,i=JSON.parse(t.data);if("config"===i.type)null==lt&&null!=i.ue4ExeInfo&&(lt=i.ue4ExeInfo,De=new Date),ce(i);else if("playerCount"===i.type)n=i.count-1,(o=document.getElementById("kick-other-players-button"))&&(o.value=`Kick (${n})`);else if("offer"===i.type)console.log(" <- SS arvind offer --\x3e  msg.sdp: %o",i.sdp),onWebRtcOffer(i);else if("answer"===i.type)console.log(" answer : "+JSON.stringify(i)),_?(F=2,U(i)):(qt.receiveAnswer(i),function(){let e=3e5,t=e;qt.onAggregatedStats=n=>{let o=new Intl.NumberFormat(window.navigator.language,{maximumFractionDigits:0}),i=new Intl.NumberFormat(window.navigator.language,{maximumFractionDigits:0,minimumIntegerDigits:2}),a=(n.timestamp-n.timestampStart)/1e3,r=[],l=[60,60];for(let e=0;e<l.length;e++)r.push(a%l[e]),a/=l[e];r.push(a);let s=r[0],c=Math.floor(r[1]),d=Math.floor([r[2]]),u="B",g=n.hasOwnProperty("bytesReceived")?n.bytesReceived:0,m=["kB","MB","GB"];for(let e=0;e<m.length&&!(g<1e5);e++)g/=1e3,u=m[e];let f="kB",p=n.hasOwnProperty("audiobytesReceived")?n.audiobytesReceived:0,y=["MB","GB"];p/=1e3;for(let e=0;e<y.length&&!(p<1e5);e++)p/=1e3,f=y[e];var v="B",h=n.hasOwnProperty("databytesReceived")?n.databytesReceived:0;let w=["kB","MB","GB"];for(let e=0;e<w.length&&!(h<1e5);e++)h/=1e3,v=w[e];var S="B",b=n.hasOwnProperty("databytesSent")?n.databytesSent:0;let E=["kB","MB","GB"];for(let e=0;e<E.length&&!(b<1e5);e++)b/=1e3,S=E[e];let B=document.getElementById("qualityStatus"),I=document.getElementById("networkQualityStatus"),k=function(e){let t=e,n=1,o=setInterval((function(){n-=.1,B&&(B.style=`opacity: ${Math.abs(2*(n-.5))}`),I&&(I.style=`opacity: ${Math.abs(2*(n-.5))}`),n<=.1&&(0==--t?clearInterval(o):n=1)}),100/e)};let T="",C="lime";L>35?(C="red",k(2),T+=`<div style="color: ${C}">Bad network connection</div>`):L>26&&(C="orange",k(1),T+=`<div style="color: ${C}">Spotty network connection</div>`,console.log("Spotty network connection")),B&&(B.className=`${C}Status`),I&&(I.className=`${C}Status`),T+=`<div>Duration: ${i.format(d)}:${i.format(c)}:${i.format(s)}</div>`,T+=`<div>Video Resolution: ${n.hasOwnProperty("frameWidth")&&n.frameWidth&&n.hasOwnProperty("frameHeight")&&n.frameHeight?n.frameWidth+"x"+n.frameHeight:"N/A"}</div>`,T+=`<div>Received (${u}): ${o.format(g)}</div>`,T+=`<div>Video_arvi Received (${u}): ${o.format(g)}</div>`,T+=`<div>Audio Received (${f}): ${o.format(p)}</div>`,T+=`<div>Data Received (${v}): ${o.format(h)}</div>`,T+=`<div>Data Sent (${S}): ${o.format(b)}</div>`,T+=`<div>Frames Decoded: ${n.hasOwnProperty("framesDecoded")?o.format(n.framesDecoded):"N/A"}</div>`,T+=`<div>Packets Lost: ${n.hasOwnProperty("packetsLost")?o.format(n.packetsLost):"N/A"}</div>`,T+=`<div style="color: ${C}">Bitrate (kbps): ${n.hasOwnProperty("bitrate")?o.format(n.bitrate):"N/A"}</div>`,T+=`<div>Framerate: ${n.hasOwnProperty("framerate")?o.format(n.framerate):"N/A"}</div>`,T+=`<div>Frames dropped: ${n.hasOwnProperty("framesDropped")?o.format(n.framesDropped):"N/A"}</div>`,T+=`<div>Latency (ms): ${n.hasOwnProperty("currentRoundTripTime")?o.format(1e3*n.currentRoundTripTime):"N/A"}</div>`,T+=`<div style="color: ${C}">Video Quantization Parameter: ${L}</div>`;let x=document.getElementById("stats");x&&(x.innerHTML=T),Vt&&(console.log(`-> SS: stats\n${JSON.stringify(n)}`),console.log("-> SS: stats"),n.timestampStart&&n.timestamp-n.timestampStart>t&&(Ht&&Ht.readyState===Gt&&(console.log("-> SS: stats"),Ht.send(JSON.stringify({type:"stats",data:n}))),t+=e))},qt.aggregateStats(1e3),qt.latencyTestTimings.OnAllLatencyTimingsReady=function(e){if(!e.BrowserReceiptTimeMs)return;let t=e.BrowserReceiptTimeMs-e.TestStartTimeMs,n=0==e.UEPreEncodeTimeMs||0==e.UEPreCaptureTimeMs?"???":e.UEPostEncodeTimeMs-e.UEPreCaptureTimeMs,o=e.UEPostCaptureTimeMs-e.UEPreCaptureTimeMs,i=e.UEPostEncodeTimeMs-e.UEPreEncodeTimeMs,a=e.UETransmissionTimeMs-e.UEReceiptTimeMs,r=t-a,l=t-r-a,s=null,c=null;console.log("timings.FrameDisplayDeltaTimeMs: "+e.FrameDisplayDeltaTimeMs),console.log("timings.BrowserReceiptTimeMs: "+e.BrowserReceiptTimeMs),e.FrameDisplayDeltaTimeMs&&e.BrowserReceiptTimeMs&&(s=e.FrameDisplayDeltaTimeMs+t,c=s-r-a),console.log("endToEndLatency: "+s),console.log("browserSideLatency: "+c);let d="";d+=`<div>Net latency RTT (ms): ${r}</div>`,d+=`<div>UE Capture+Encode (ms): ${n}</div>`,d+=`<div>UE Capture (ms): ${o}</div>`,d+=`<div>UE Encode (ms): ${i}</div>`,d+=`<div>Total UE latency (ms): ${a}</div>`,d+=`<div>Browser send latency (ms): ${l}</div>`,d+=e.FrameDisplayDeltaTimeMs&&e.BrowserReceiptTimeMs?`<div>Browser receive latency (ms): ${e.FrameDisplayDeltaTimeMs}</div>`:"",d+=c?`<div>Total browser latency (ms): ${c}</div>`:"",d+=`<div>Total latency (excluding browser) (ms): ${t}</div>`,d+=s?`<div>Total latency (ms): ${s}</div>`:"",console.log(d),document.getElementById("LatencyStats").innerHTML=d}}(),ae(5));else if("gettings"===i.type)console.log("message type:gettings:  "+JSON.stringify(i)),console.log("message type:gettings msg.data:  "+JSON.stringify(i.data));else if("addInExistingGuestList"===i.type)(r=document.getElementById("Guest-filter"))&&i.guestList.forEach((function(e){var t=document.createElement("option");t.text=t.value=e,r.add(t,r.length-1)}));else if("GuestJoined"===i.type){if(r=document.getElementById("Guest-filter")){var a=document.createElement("option");a.text=a.value=i.guestPlayerId,r.add(a,r.length-1)}}else if("GuestLeft"===i.type){var r;if(r=document.getElementById("Guest-filter"))for(var l=0;l<r.length;l++)r.options[l].value==i.guestPlayerId&&r.remove(l)}else if("takeChatGptAnswer"===i.type)b({ChatGptQuestion:i.ChatGptQuestion,ChatGptAnswer:i.ChatGptAnswer});else if("takeUploadUrl"===i.type)!function(e,t,n,o){console.log("putFile() selectedFileName"+n);var i=no;let a=new XMLHttpRequest;a.open("PUT",e,!0),a.setRequestHeader("Content-type",t),a.onload=function(){let t=a.responseText;if(4==a.readyState&&"200"==a.status){console.log("Successfully uploaded",t),console.log("file:",i),console.log("DIRECT URL",e.split("?")[0]);var r=e.split("?")[0],l=o+n,s=JSON.stringify({type:"askElToDownloadFileTO",url:r,downloadPath:l});Ht&&(console.log(" ws.send(): "+JSON.stringify(s)),Ht.send(s))}else console.error(t);no=void 0},a.onprogress=function(e){console.log("Progress",e)},a.send(i)}(i.uploadURL,i.input.content_type,i.input.file_name,i.input.pathToSaveFile);else if("sendplayerType"===i.type){Pt=i.matchmakerInfo;var s=void 0;urlParams&&(s=urlParams.get("appVersion")),null==s&&(s=-1),null==kt&&(kt="undefined"),Ue.clientSideInfo={},Ue.clientSideInfo.url=window.location.href,Ue.clientSideInfo.userAgent=navigator.userAgent,Ue.clientSideInfo.clientInfo=kt,Ue.clientSideInfo.userDeviceInfo=Zt;var c=JSON.stringify({type:"takePlayerType",isSpectator:vt,hostMeetingId:mt,appDownloadInfo:Oe,GuestMeetingId:ft,version:s,uInfo:ye,userDeviceInfo:Zt,configName:yt,urlVersion:ze,appName:St("appName"),navigationType:window.location.href,url:window.location.href,userAgent:navigator.userAgent,clientInfo:kt,serverOwner:fe,forceMeetingMode:ht,accessedTopLevelDomainName:Ke,url_searchParams:String(urlParams),configuration:Ue});console.log(" ws.send(): "+JSON.stringify(c)),Ht.send(c)}else if("handleshuttingDownVM"===i.type)We=!0,ie(d="shutting down this VM .So redirecting you in 3 sec to re-establish connection",5e3);else if("handleElDisconnected"===i.type){We=!0;var d="EL crashed: "+i.errormsg;if(window.webRtcPlayerObj&&window.webRtcPlayerObj.pcClient){const e=window.webRtcPlayerObj.pcClient.iceConnectionState;if("connected"===e){var u="handleElDisconnected() EL crashed but Video stream is streaming. so returning";return console.log(u),void we(u,-4089034249)}"failed"!==e&&"disconnected"!==e&&"closed"!==e||(d=d+" ice connectionState: "+e)}d+=" .So redirecting you in 3 sec to re-establish connection",console.log(d),ie(d,5e3,!0,-972942690,"handleElDisconnected")}else if("handleStreamerDisconnected"===i.type)We=!0,ie(d="Streamer Disconnected.So redirecting you in 3 sec to re-establish connection",5e3,!0,-828953428,"StreamerDisconnected");else if("ping"===i.type)Ht.send(JSON.stringify({type:"pong"}));else if("reload"===i.type)location.reload();else if("ConfigUpdateOnClientSide"===i.type)window.location.href=window.location.href;else if("redirectTo"===i.type)console.log("222222 <- SS: msg.data.url: "+i.url),window.location.replace(i.url);else if("jsonMessageForUE4"===i.type)console.log("jsonMessageForUE4: "+JSON.stringify(i.jsonObj)),b(i.jsonObj);else if("ShowThisHtmlPage"===i.type)Ot=!0,Ht&&Ht.close(),self.location=i.htmlPage;else if("setGuestId"===i.type)document.getElementById("GuestTitle").innerHTML=i.guestId;else if("sendtoUnrealinAppPurchaseResult"===i.type)console.log("222222 <- SS: sendtoUnrealinAppPurchaseResult msg.data.info: "+i.data.purchasResult),b({purchasResult:i.data.purchasResult});else if("ShowE3ds_alert"===i.type){console.log("222222 <- SS: ShowE3ds_alert msg.data.info: "+i.data.info);var g={};null!=i.data.color&&(g.color=i.data.color),null!=i.data.timeout&&(g.timeout=i.data.timeout),et(i.data.info,g)}else if("UE5Editorlunched"===i.type){console.log(JSON.stringify(i));var f="http://"+i.url+":"+i.port;console.log("UE5Editorlunched url "+f),location.assign(f)}else if("UE4LogFromEL"===i.type)console.info(i.data.logLine);else if("showPageWIthMsg"===i.type)po(i.data.info);else if("ShowInfoToInjectStreamFromEditor"===i.type){var p="ws://"+e.domain+":"+e.ue4StreamerToSS;console.log("injectStreamFromEditorInfo: "+p),obj=document.getElementById("loaderStep1"),obj&&(obj.style.display="none"),document.getElementById("Info4injectStreamFromEditor").value=p;var y=document.getElementById("popupForinjectStreamFromEditorInfo");y&&(y.style.display="flex")}else if("ShowInfo"===i.type){if(console.log("222222 <- SS: msg.data.info: "+i.data.info),g={},null!=i.data.color&&(g.color=i.data.color),null!=i.data.timeout&&(g.timeout=i.data.timeout),i.data.info.startsWith("showPageWIthMsg:"))return void po(i.data.info.replace("showPageWIthMsg:",""));if(i.data.info.startsWith("EL Error:")){let e=i.data.info.replace("EL Error:","");console.error(e),et(e,g)}try{var v=JSON.parse(i.data.info);console.log("33333 <- SS: msg.data.info: "+JSON.stringify(v));var h=document.getElementById("Title_AcquiringProgresss"),w=document.getElementById("AcquiringProgress"),S=document.getElementById("Title_PreparingProgress"),E=document.getElementById("PreparingProgress"),B=document.getElementById("LunchingProgress"),I=document.getElementById("Title_LunchingProgress");if("AppAcquiringData"==v.datatype){if(console.log("5555 <- AppAcquiringData AcquiringProgress: "+v.data.percent),e3ds_controller.callbacks&&"function"==typeof e3ds_controller.callbacks.onReceivingAppAcquiringProgress?e3ds_controller.callbacks.onReceivingAppAcquiringProgress(v.data.percent):console.log("not found e3ds_controller.callbacks.onReceivingAppAcquiringProgress"),h.style.display="block",window.isAppPreparationprocessGoingOn=!0,null!==w){w.value=100*v.data.percent;var k={type:"stage3_1_AppAcquiringProgress",percent:v.data.percent};m(k),B.style.display="none",I.style.display="none",w.style.display="block",w.value>=100&&(S.style.display="block",null!==E&&(E.value=0,E.style.display="block"))}}else"AppPreparationData"==v.datatype&&(window.isAppPreparationprocessGoingOn=!0,e3ds_controller.callbacks&&"function"==typeof e3ds_controller.callbacks.onReceivingAppPreparationProgress?e3ds_controller.callbacks.onReceivingAppPreparationProgress(v.data.percent):console.log("not found e3ds_controller.callbacks.onReceivingAppPreparationProgress"),k={type:"stage3_2_AppPreparationProgress",percent:v.data.percent},m(k),v.data.percent>=100&&(window.isAppPreparationprocessGoingOn=!1,Z(),Y()),null!==E&&(E.value=v.data.percent,E.style.display="block",S.style.display="block",B.style.display="none",I.style.display="none",E.value>=100&&(I.style.display="block",null!==B&&(B.value=0,B.style.display="block"))))}catch(e){}}else if("TakeuserDeviceInfo"===i.type)Zt=i.userDeviceInfo,console.log(`userDeviceInfo : ${JSON.stringify(Zt)}`),console.log(`elInfo : ${JSON.stringify(i.elInfo)}`),console.log(" 1111111111111 useExtendedTyping > "+bt);else if("OnLocalFileUploadingFinished"===i.type){var T=i.data.objFromUE4;if(null!=T)switch(T.cmd){case"downloadLocalFileOnUserDevice":window.open(i.data.Location,"_blank");break;case"getDownloadUrlOfLocalFile":b({type:"takeDownloadUrlOfLocalFile",downloadURL:i.data.Location,localFile:T.fileToDownload})}}else if("OnFinishingOfClientFileDownladOnEL"===i.type){let e={cmd:"onUploadedFileAvailable",filename:i.data.filename};b(e),console.log(e)}else"ue4Version"===i.type?i.currentAppsUE4Version:"ue4ExeInfoMsg"===i.type?((lt=i.ue4ExeInfo).versionString,De=new Date,console.log("ue4AppExe path:"+lt.ue4AppExe),ae(2)):"iceCandidate"===i.type?(qt&&qt.handleCandidateFromServer(i.candidate),ae(5)):"DisableControlFromOthers"===i.type?vt=!0:"AllVideoAssetsUrls"===i.type?function(e){if(!(e.apps.data.blobs.length<=0||e.apps.data.blobs[0].files.length<=0)){var t=e.apps.data.blobs[0].files;if(!(t.length<=0)){var n=document.getElementById("videoAssets");if(n){n.innerHTML="";for(var o=0;o<t.length;o++){var i=t[o].url,a=document.createElement("option");a.text=a.value=i,n.add(a,o)}}}}}(i):"All2dAssetsUrls"===i.type?function(e){if(!(e.apps.data.blobs.length<=0||e.apps.data.blobs[0].files.length<=0)){var t=e.apps.data.blobs[0].files;if(!(t<=0)){var n=document.getElementById("imageAssets");if(n){n.innerHTML="";for(var o=0;o<t.length;o++){var i=t[o].url,a=document.createElement("option");a.text=a.value=i,n.add(a,o)}}}}}(i):"GiveControlToThisGuest"===i.type?vt=!1:console.warn(`invalid SS message type: ${i.type}`)},Ht.reconnectAttempt=0,Ht.onerror=function(e){console.error(`WS error: ${JSON.stringify(e)}`),console.error("redirecting to: "+window.location.href),r(e)},Ht.onclose=function(e){console.error(`WS closed: ${JSON.stringify(e.code)} - ${e.reason}`),console.error("WS closed:"+JSON.stringify(e)),r(e)},Ht.onclose111=function(e){console.warn(`WS closed: ${JSON.stringify(e.code)} - ${e.reason}`+window.location.href),Ht=void 0;let t=document.getElementById("player");qt&&(t.removeChild(qt.video),qt.close(),qt=void 0),Zn(`Disconnected: ${e.reason}`),setTimeout(start,4e3)}}else alert("Your browser doesn't support WebSocket");function r(e){if(it){Ht&&(Ht.reconnectAttempt++,console.error("ssReconnec() reconnectAttempt:"+Ht.reconnectAttempt)),Ht=void 0;var t=function(e){if(e>=0&&e<=999)return"(Unused)";if(e>=1016){if(e<=1999)return"(For WebSocket standard)";if(e<=2999)return"(For WebSocket extensions)";if(e<=3999)return"(For libraries and frameworks)";if(e<=4999)return"(For applications)"}return void 0!==st[e]?st[e]:"(Unknown)"}(e.code),n="SS crashed.Redirecting you in 3 sec to re-establish connection. "+JSON.stringify(e.code)+" : "+e.reason+" : "+t,o=!1;1e3!=e.code&&1001!=e.code&&1006!=e.code||(o=!0),console.error(`WS closed: ${JSON.stringify(e.code)} - ${e.reason}`),ie(n,5e3,o,-972634118)}}}Number.prototype.clamp=function(e,t){return Math.min(Math.max(this,e),t)},document.getElementById("Title_AcquiringProgresss"),document.getElementById("AcquiringProgress"),document.getElementById("Title_PreparingProgress"),document.getElementById("PreparingProgress"),document.getElementById("LunchingProgress"),document.getElementById("Title_LunchingProgress");var ue=0;let ge;var me=void 0;let fe,pe,ye,ve,he=!1;function we(e,t){1==ue&&console.log("postToTelegram(): "+e),"function"==typeof postToTelegramBody&&postToTelegramBody(e,t)}function Se(e,t){var n=ge;me&&me.elInfo&&(n=n+" : ----\x3e"+me.elInfo.instanceId_exeLuncher+" : "+me.elInfo.computerName),kt&&(n=n+" : ----\x3e"+JSON.stringify(kt)),Zt&&(n=n+" : ----\x3e"+JSON.stringify(Zt)),n=n+" : ----\x3eappname: "+pt+" , owner: "+fe+" , "+JSON.stringify(lt),null!=pe&&(n=n+" : ----\x3e config.peerConnectionOptions: "+JSON.stringify(pe.peerConnectionOptions)+" : ----\x3e"),n=e+" : "+n,null==t?we(n):we(n,t)}window.addEventListener("error",(function(e){Se&&Se(`Uncaught Error: ${e.message}\nStack Trace: ${e.error?e.error.stack:"N/A"}`,-4064029056)})),window.addEventListener("unhandledrejection",(function(e){Se(`Unhandled Rejection: ${e.reason}`,-4064029056)}));var be=console,Ee=console.log,Be=console.warn;dt(0),"undefined"==typeof e3ds_controller&&(e3ds_controller={}),void 0===e3ds_controller.callbacks&&(e3ds_controller.callbacks={});var Ie=60,ke=!1,Te=!1,Ce=new Date,xe=void 0,Oe=void 0;let Ae=-1;function Pe(){1!=window.isAppPreparationprocessGoingOn?xe=setInterval((function(){var e=new Date-Ce;if(Te){clearInterval(xe);var t="video stream took:"+e/1e3+" sec.  Url: "+window.location.href;me&&me.elInfo&&(t=me.elInfo.computerName+" : "+t),lt&&lt.ue4AppExe&&(t=t+" : "+lt.ue4AppExe),we(t,-4025536547)}else e/1e3>300?(we("VideoStreamFailedToStart waiting after :"+e/1e3+" sec.  Url: "+window.location.href+"  : clientInfo:"+JSON.stringify(kt),-4131027914),setTimeout((function(){window.location="/assets/pages/VideoStreamFailedToStart.htm"}),2e3)):e/1e3>Ie&&(we("no video. time passed:"+e/1e3+" sec.  Url: "+window.location.href+"  : clientInfo:"+JSON.stringify(kt),-4131027914),Ie+=30)}),300):setTimeout((function(){Pe()}),1e3)}var Me=void 0,De=void 0;let Re,Ne=null;var Le=50;let Fe,_e,Ue,Je,We=!1,$e=!1;var He="connector.eagle3dstreaming.com",qe=void 0,Ve=void 0;let je,Ge,ze,Xe,Qe,Ye,Ke;function Ze(e,t){try{e.muted=t}catch(e){console.log("Error: "+e.message),Se("muteElement()",-937307130),Se(e.message,-937307130),Se(console.trace(),-937307130)}}function et(e,t){0!=St("enableRuntimeNotifications")&&e3ds_alert&&e3ds_alert(e,t)}function tt(e,t,n=1e3){null!=t?1===t.readyState?t.send(e):setTimeout((function(){tt(e,t,n)}),1e3):console.error("ahsanWsSend--\x3ews2WorkWIth undefined  ")}var nt=new Array,ot=!1,it=!0,at=!0,rt=void 0,lt=void 0;let st={1e3:"Normal Closure",1001:"Going Away",1002:"Protocol Error",1003:"Unsupported Data",1004:"(For future)",1005:"No Status Received",1006:"Abnormal Closure",1007:"Invalid frame payload data",1008:"Policy Violation",1009:"Message too big",1010:"Missing Extension",1011:"Internal Error",1012:"Service Restart",1013:"Try Again Later",1014:"Bad Gateway",1015:"TLS Handshake"};function ct(e){fe=e}function dt(e){0==e?(console=console||{},console.log=function(){},console.warn=function(){}):1==e&&(console=be,console.log=Ee,console.warn=Be)}var ut="https://d35e1ftufisrhj.cloudfront.net/v1/assets/images/UE4_Logo.png",gt="https://d35e1ftufisrhj.cloudfront.net/v1/assets/images/background.jpg";gt=void 0;var mt=void 0,ft=void 0,pt=void 0,yt=void 0,vt=!1,ht=0,wt=void 0;function St(e){if(null!=Ue){var t=Ue[e];if(""==t||"undefined"==t||null==t)return;return t}return urlParams.get(e)}var bt=0,Et=!1,Bt=1,It="cursor:default",kt=void 0,Tt="assets/images/background.jpg";Tt=void 0;var Ct=!0,xt="",Ot=!1,At=!1,Pt=void 0,Mt=!1,Dt=document.createElement("Audio"),Rt=void 0,Nt=!1,Lt=1,Ft=0,_t=0,Ut=9e5,Jt=0;function Wt(){if(1==Bt){console.log(" 1111111111111 showbrowserMouse === 1 > "),console.log(" 1111111111111 extractValueFromUrl(showbrowserMouse):"+St("showbrowserMouse"));var e=St("mouseCursorPointerStyle");""!=e&&null!=e&&(It=e),xt=""==xt||xt.includes("cursor:")?It:xt+" "+It}else xt="cursor:none";console.log(" 1111111111111 styleAdditional > "+xt),W()}let $t;var Ht,qt=null,Vt=!1,jt=!1;const Gt=1;var zt,Xt,Qt,Yt,Kt,Zt,en,tn=void 0,nn=new Map,on=null,an=!0;At=!1,Ot=!1,window.isAppPreparationprocessGoingOn=!1;let rn=0;var ln=void 0,sn=void 0,cn=void 0;function dn(){return!(window.location===window.parent.location||window.self===window.top)}function un(){if(void 0===Qe&&(Qe=window.location.search),"undefined"==typeof urlParams&&(urlParams=new URLSearchParams(window.location.search)),"undefined"!=typeof e3ds_controller&&null==Ue)if(je=.01,null!=e3ds_controller.core){null!=e3ds_controller.core.domain?He=e3ds_controller.core.domain:console.warn("e3ds_controller.core.domain absent so setting to default one: "+He),null!=e3ds_controller.core.userName?ct(e3ds_controller.core.userName):console.error("e3ds_controller.core.userName missing"),null!=e3ds_controller.core.appName?qe=e3ds_controller.core.appName:console.error("e3ds_controller.core.appName missing"),null!=e3ds_controller.core.configurationName?Ve=e3ds_controller.core.configurationName:console.error("e3ds_controller.core.configurationName missing"),null==fe&&console.error("userName missing"),null==qe&&console.error("app missing"),null==Ve&&console.error("configurationName missing");var e="/v5/"+fe+"/"+qe+"/"+Ve;Xe=e,ge="https://"+He+e,ge+=Qe,console.log("href_emulated: "+ge)}else console.error("e3ds_controller.core is missing ");for(var[t,n]of urlParams.entries()){console.log(t,n);var o=urlParams.get("app"),i=urlParams.get("owner"),a=urlParams.get("configuration");null!=o&&(qe=o),null!=i&&ct(i),null!=a&&(Ve=a)}Xe=new URL(ge).pathname,Ge=Xe.split("/"),ze=Ge[1],Ye=window.location.hostname.split("."),Ke=Ye[1]+"."+Ye[2];for(const[e,t]of urlParams)"args"!==e&&"launcher"!==e||urlParams.set("exeLunchArgs",t),console.log(e,t);if("v5"==ze)if("spectator"==Ge[2])vt=!0,ht=2,de({domain:"ms6.eaglepixelstreaming.com",httpsPort:8084});else{ct(Ge[2]),pt=Ge[3],yt=Ge[4];var r=urlParams.get("appVersion");r&&(Ae=r);for(const[e,t]of urlParams){if("hostMeetingId"==e){mt=t;break}if("GuestMeetingId"==e){ft=t,yt=Ge[3],pt=void 0;break}}}else if("v4"==ze)if(null==Ge[2])console.log("wrong url. missing parts of it");else{var l=Ge[2];console.log("/:configurationStr:"+l);var s=atob(l);console.log("/:configuration decryptedString:"+s);try{Ue=JSON.parse(s),Ue.systemVersion=4,ct(Ue.owner),pt=Ue.appName}catch(e){console.log("wrong url"),e instanceof SyntaxError?(console.error(e.name),console.log(e)):(console.error(e.message),console.log(e))}}else if("v6"==ze)if(null==Ge[2])console.log("wrong url. missing parts of it");else{var c=Ge[2];1==ue&&console.log("/:jsonStr:"+c),s=atob(c),1==ue&&console.log("/:configuration decryptedString:"+s);try{decryptedJson=JSON.parse(s),Ue.systemVersion=6,ct(decryptedJson.owner),pt=decryptedJson.appName,null==decryptedJson.configName?null==decryptedJson.ConfigName?(console.warn("ConfigName: "+decryptedJson.ConfigName),et("Invlaid encryted Url ",{color:"Red"})):null!=decryptedJson.ConfigName&&(yt=decryptedJson.ConfigName):yt=decryptedJson.configName}catch(e){console.log("wrong url"),e instanceof SyntaxError?(console.error(e.name),console.log(e)):(console.error(e.message),console.log(e))}}else console.log("Invalid url");var d=document.getElementById("resoulbar");if(d&&(d.style.transform="scaleX(-1)"),null==(Me=document.getElementById("streamingVideo")))return console.info("missing streamingVideoElement : ",Me),void setTimeout(e3ds_controller.main,2e3);"v5"!=ze&&"v4"!=ze&&"v6"!=ze||vt||So(),uo()}var gn=void 0,mn=!1;function fn(e=0,t,n){if(console.log("e3ds_session_token: "+t),console.log("clientUserName: "+n),null==t||""==t)return void console.info("invalid e3ds_session_token: "+t);if(null==n||""==n)return void console.info("invalid clientUserName");var o="https://token.eaglepixelstreaming.com//api/v1/token/verify?token="+t+"&client="+n;const i=new XMLHttpRequest;i.onreadystatechange=function(){if(422===i.status)return console.log("GetTokenInfo() received 422 status code. Returning default clientInfo object."),void ko();if(429===i.status)return console.log("GetTokenInfo() received 429 status code. Retrying after 2000ms."),null!=gn&&clearTimeout(gn),void(gn=setTimeout(fn,2e3,e));if(""!==i.responseText&&void 0!==i.responseText){if(mn)return;mn=!0,console.log("GetTokenInfo() request successful. Clearing retry timer."),clearTimeout(gn),console.log("GetTokenInfo() xmlHttp.responseText: "+i.responseText);var t=void 0;if(200===i.status){try{t=JSON.parse(i.responseText)}catch(e){console.info(" e3ds_session_token verification parse failed"),console.info(e)}console.log("GetTokenInfo() decryptedJsone_3ds_controller1: "+JSON.stringify(t,null,"\t")),e3ds_controller.core=t.core,e3ds_controller.configurationToOverride=t.configurationToOverride,un()}else if(401===i.status){try{t=JSON.parse(i.responseText)}catch(e){console.info(" e3ds_session_token verification parse failed"),console.info(e)}if(t.error)return console.warn("GetTokenInfo() error: "+t.error),void console.info(t.error)}}else e<20?(console.log("GetTokenInfo() retrying after 2000ms."),null!=gn&&clearTimeout(gn),gn=setTimeout(fn,2e3,e+1)):(console.log("GetTokenInfo() maximum retries exceeded."),ko())},i.open("GET",o,!0),i.send(null)}function pn(){document.getElementById("editor-sidebar").style.width="0"}function yn(){const e=document.getElementById("sidebar-form");console.log("Video Assets:",e.videoAssets.value),console.log("Image Assets: ",e.imageAssets.value)}function m(e){dn()&&window.top.postMessage(e,"*")}"undefined"!=typeof e3ds_controller&&(e3ds_controller.main=function(e,t){if(null!=window.appconfigPassed2Ejs){if("string"==typeof window.appconfigPassed2Ejs)return void alert(window.appconfigPassed2Ejs);Ue=window.appconfigPassed2Ejs,ye=window.uInfo,console.log("configurationObj: "+JSON.stringify(Ue)),console.log("uInfo: "+ye),ge=window.location.href,un()}else fn(0,e,t)});var vn=!1,hn=void 0,wn=void 0;function Sn(){Dt.play().then((()=>{Dt.ahsanHack="success",Dt.muted=!1,Ze(streamingVideo,!1),console.log("audioElem2.muted: "+Dt.muted)})).catch((e=>{Dt.ahsanHack="failed",console.warn("Autoplay  audio was prevented.waiting  for first interaction call "),console.log("handleOnAudioTrack() Error.message : "+e.message),console.log("handleOnAudioTrack() error.name : ",e.name),console.log("handleOnAudioTrack() error.stack : ",e.stack),document.getElementById("streamingVideo").paused&&Se("paused+handleOnAudioTrack() audioElem.play() error: "+e,-4162225230)}))}function bn(){let e=btoa(V.jpeg.reduce(((e,t)=>e+String.fromCharCode(t)),""));on.src="data:image/jpeg;base64,"+e,on.onload=function(){V.height=on.naturalHeight,V.width=on.naturalWidth,G(),an?(Yn(),W()):j()}}function En(e){e=e||{};var t=this;this.cfg=e.peerConnectionOptions||{},this.cfg.sdpSemantics="unified-plan",this.cfg.offerExtmapAllowMixed=!1,this.pcClient=null,this.dcClient=null,this.tnClient=null,this.sdpConstraints={offerToReceiveAudio:1,offerToReceiveVideo:1},this.dataChannelOptions={ordered:!0},this.latencyTestTimings={TestStartTimeMs:null,UEReceiptTimeMs:null,UEPreCaptureTimeMs:null,UEPostCaptureTimeMs:null,UEPreEncodeTimeMs:null,UEPostEncodeTimeMs:null,UETransmissionTimeMs:null,BrowserReceiptTimeMs:null,FrameDisplayDeltaTimeMs:null,Reset:function(){this.TestStartTimeMs=null,this.UEReceiptTimeMs=null,this.UEPreCaptureTimeMs=null,this.UEPostCaptureTimeMs=null,this.UEPreEncodeTimeMs=null,this.UEPostEncodeTimeMs=null,this.UETransmissionTimeMs=null,this.BrowserReceiptTimeMs=null,this.FrameDisplayDeltaTimeMs=null},SetUETimings:function(e){this.UEReceiptTimeMs=e.ReceiptTimeMs,this.UEPreCaptureTimeMs=e.PreCaptureTimeMs,this.UEPostCaptureTimeMs=e.PostCaptureTimeMs,this.UEPreEncodeTimeMs=e.PreEncodeTimeMs,this.UEPostEncodeTimeMs=e.PostEncodeTimeMs,this.UETransmissionTimeMs=e.TransmissionTimeMs,this.BrowserReceiptTimeMs=Date.now(),this.OnAllLatencyTimingsReady(this)},SetFrameDisplayDeltaTime:function(e){null==this.FrameDisplayDeltaTimeMs&&(this.FrameDisplayDeltaTimeMs=Math.round(e),this.OnAllLatencyTimingsReady(this))},OnAllLatencyTimingsReady:function(e){}},createWebRtcVideo=function(){var e=Me;if(setInterval((function(){e.readyState}),1e3),1==Lt&&(nt.length>0||(e.autoplay=!0,Ze(e,!0)),e.disablepictureinpicture=!0,d()),e.addEventListener("loadstart",(function(){})),e.addEventListener("durationchange",(function(e){}),!0),e.addEventListener("loadeddata",(function(e){console.log("loadeddata video() e.target.duration:",e.target.duration)}),!0),e.addEventListener("seeking",(e=>{console.log("Video is seeking a new position.")})),e.addEventListener("seeked",(e=>{console.log("Video found the playback position it was looking for.")})),e.addEventListener("playing",(e=>{if(console.log("Video is no longer paused"),Te=!0,Ue&&1==Ue.injectStreamFromEditor){var t=document.getElementById("popupForinjectStreamFromEditorInfo");t&&(t.style.display="none")}})),e.addEventListener("waiting",(e=>{console.log("Video is waiting for more data.")})),e.addEventListener("ended",(e=>{console.log("Video stopped either because 1) it was over, or 2) no further data is available.")})),e.addEventListener("volumechange",(e=>{console.log("The volume changed.")})),e.addEventListener("emptied",(e=>{console.log("Uh oh. The media is empty. Did you call load()?")})),e.addEventListener("stalled",(e=>{console.log("Failed to fetch data, but trying.")})),e.addEventListener("progress",(function(e){}),!0),e.addEventListener("canplay",(function(e){}),!0),e.addEventListener("canplaythrough",(function(e){}),!0),e.addEventListener("loadedmetadata",(function(e){console.log("loadedmetadata video():",new Date);var t=new Date-hn;Math.round(t/6e4),console.log("Time cost :",t/6e4),clearInterval(wn),Ht&&Ht.readyState===Gt&&(console.log("----------------- webRtcPlayerObj.onVideoInitialised()--\x3eWS_OPEN_STATE"),1==St("isE3DSEngineApp")&&function(){if(1!=St("isE3DSEngineApp"))return console.warn("Engine version below 4.26. so skipping settingsButton VideoEncoderQP -> : "+L),void et("Require Atleast E3DS-UE4-Engine 4.26 "+(Math.random()*(.12-.02)+.02).toFixed(4),{timeout:2e3,color:"blue"});var e=JSON.stringify({type:"settings",data:{quality:St("quality"),minBitrate:St("minBitrate"),maxBitrate:St("maxBitrate"),resolution:St("resolution"),rateCtrl:St("rateCtrl")}});0==St("qualityLevel")?e.minBitrate=0:1==St("qualityLevel")&&(e.minBitrate=2e7),console.log("applyInitialeStreamSettings--\x3e "+e),Ht.send(e)}(),an&&(Yn(),W()))}),!0),"requestVideoFrameCallback"in HTMLVideoElement.prototype){const n=(o,i)=>{if(i.receiveTime&&i.expectedDisplayTime){const e=i.presentationTime-i.receiveTime;t.aggregatedStats||(t.aggregatedStats={}),t.aggregatedStats.receiveToCompositeMs=e}e.requestVideoFrameCallback(n)};e.requestVideoFrameCallback(n)}return e},this.video=createWebRtcVideo(),onsignalingstatechange=function(e){console.log("signaling state change:",e)},oniceconnectionstatechange=function(e){switch(console.log("ice connection state change:",e.target.iceConnectionState,"  -> ",new Date),e.target.iceConnectionState){case"new":console.log("ICE connection state: New connection.");break;case"checking":console.log("ICE connection state: Checking connectivity.");break;case"connected":case"completed":console.log("ICE connection state: Connection established.");break;case"disconnected":console.log("ICE connection state: Disconnected from the remote peer.");break;case"failed":console.log("ICE connection state: Connection failed.");break;case"closed":console.log("ICE connection state: Connection closed.");break;default:console.log("Unknown ICE connection state.")}if("disconnected"==e.target.iceConnectionState)console.warn("ice server diconnected");else if("connected"==e.target.iceConnectionState){var t=new Date-De,n="iceConnectionState connected at : "+Math.round(t/6e4);console.log(n),n>10&&Se(n,-984137241),wn=setInterval((function(){console.log("High load.Might take upto 3 min. dont close tab ")}),15e3)}},onicegatheringstatechange=function(e){console.log("ice gathering state change:",e),ae(5)},handleTrackRemoved=function(e){console.log("A remote track has been removed"),"video"===e.track.kind&&console.log(" video stream has stopped.")},handleOnTrack=function(e){if(console.log("handleOnTrack",e.streams),e.track&&console.log("Got track - "+e.track.kind+" id="+e.track.id+" readyState="+e.track.readyState),"audio"!=e.track.kind)return"video"==e.track.kind&&(t.video.srcObject,e.streams[0]),null!=Ne&&Ne!==e.track&&console.log("Video track has changed"),Ne=e.track,Ne.onended=function(){console.log("XXXXXXXXXXXX Video has stopped.")},ae(5),t.video.srcObject=e.streams[0],console.log("Set video source from video track ontrack."),ke=!0,Ht&&Ht.send(JSON.stringify({type:"DoFBEntreyofVideoStreamStartedAt",loggedInUserData:ve})),Fe&&clearInterval(Fe),void(Fe=setInterval((function(){Ht&&Ht.send(JSON.stringify({type:"updateFBEntryofVideoStreamContinueHeartBeat"}))}),3e4));rt=e.streams[0]},this.handleOnAudioTrack=function(e){console.log("handleOnAudioTrack()111:",new Date),t.video.srcObject!=e&&t.video.srcObject&&t.video.srcObject!==e&&(Dt.autoplay=!0,Dt.srcObject=e,Rt=e,Dt.addEventListener("loadedmetadata",(function(e){}),!0),Dt.addEventListener("loadstart",(function(){})),Dt.addEventListener("durationchange",(function(e){}),!0),Dt.addEventListener("loadeddata",(function(e){}),!0),Dt.addEventListener("progress",(function(e){}),!0),Dt.addEventListener("canplay",(function(e){}),!0),Dt.addEventListener("canplaythrough",(function(e){}),!0),Sn())},createDataChannel=function(e,t,n){return Re=e.createDataChannel(t,n),console.log(`Created datachannel (${t})`),setupDataChannelCallbacks(Re),Re},setupDataChannelCallbacks=function(e){try{return e.binaryType="arraybuffer",e.addEventListener("open",(t=>{console.log(`Data channel connected: ${e.label}(${e.id})`),"function"==typeof onDataChannelOpen?onDataChannelOpen():console.log("not found onDataChannelOpen"),e3ds_controller.callbacks&&"function"==typeof e3ds_controller.callbacks.onDataChannelOpen?e3ds_controller.callbacks.onDataChannelOpen():console.log("not found e3ds_controller.callbacks.onDataChannelOpen"),Ht&&Ht.readyState===Gt&&(zn("WebRTC connected, waiting for video"),ae(100),b("4K"),q(),(new Date).toUTCString(),Ht&&Ht.send(JSON.stringify({type:"DoFBEntreyofDataChannelConnectedAt",loggedInUserData:ve})),_e&&clearInterval(_e),_e=setInterval((function(){Ht&&Ht.send(JSON.stringify({type:"updateFBEntryofDataChannelHeartBeat"}))}),3e4)),clearTimeout(Qt),function(){let e={};en&&(e.cmdLineArgs=en,console.log("33333333333333 sendDataToUE4App emitUIInteraction: "+JSON.stringify(e)),b(e))}()})),e.addEventListener("close",(t=>{console.log(`Data channel disconnected: ${e.label}(${e.id}`,t),_e&&clearInterval(_e),"function"==typeof onDataChannelClose?onDataChannelClose():console.log("not found onDataChannelClose"),e3ds_controller.callbacks&&"function"==typeof e3ds_controller.callbacks.onDataChannelClose?e3ds_controller.callbacks.onDataChannelClose():console.log("not found e3ds_controller.callbacks.onDataChannelClose")})),e.addEventListener("message",(e=>{!function(e){var t=new Uint8Array(e);let n=new TextDecoder("utf-16").decode(e.slice(1));var o=n,i=void 0;try{i=JSON.parse(o),onProtocolMessage(i)}catch(e){}if(V.receiving){let e=new Uint8Array(V.jpeg.length+t.length);e.set(V.jpeg,0),e.set(t,V.jpeg.length),V.jpeg=e,V.jpeg.length===V.size?(V.receiving=!1,V.valid=!0,console.log(`received complete freeze frame ${V.size}`),bn()):V.jpeg.length>V.size?(console.error(`received bigger freeze frame than advertised: ${V.jpeg.length}/${V.size}`),V.jpeg=void 0,V.receiving=!1):console.log(`received next chunk (${t.length} bytes) of freeze frame: ${V.jpeg.length}/${V.size}`)}else if(t[0]===P.fmp4){var r=e.slice(1);console.log("fmp4 size "+r.byteLength),putPacket(r)}else if(t[0]===P.QualityControlOwnership){let e=0!==t[1];null!=zt&&null!=e&&(zt.disabled=e,zt.checked=e)}else if(t[0]===P.Response){if(vt)return;let t=new TextDecoder("utf-16").decode(e.slice(1));console.log("111111111 response: "+t);for(let e of nn.values())e(t)}else if(t[0]===P.Command){let t=new TextDecoder("utf-16").decode(e.slice(1));console.log("111111111 commandAsString: "+t);let n=JSON.parse(t);"onScreenKeyboard"===n.command&&1==bt&&function(e){if(e.showOnScreenKeyboard){let o=unquantizeAndDenormalizeUnsigned(e.x,e.y);var t=o.y.toString()+"px",n=sfsfsf=(o.x-40).toString()+"px";a.style.top=t,a.style.left=n,p=!0,a.value,b({CMD:"sendFocusedWidgetText"})}}(n)}else if(t[0]===P.FreezeFrame)V.size=new DataView(t.slice(1,5).buffer).getInt32(0,!0),V.jpeg=t.slice(5),V.jpeg.length<V.size?(console.log(`received first chunk of freeze frame: ${V.jpeg.length}/${V.size}`),V.receiving=!0):(console.log(`received complete freeze frame: ${V.jpeg.length}/${V.size}`),bn());else if(t[0]===P.UnfreezeFrame)on.style.display="none",V.valid=!1;else if(t[0]===P.VideoEncoderAvgQP)L=new TextDecoder("utf-16").decode(e.slice(1));else if(t[0]==P.LatencyTest){let t=new TextDecoder("utf-16").decode(e.slice(1));console.log("Got latency timings from UE."),console.log(t);let n=JSON.parse(t);console.log("LatencyTest from ue:"+JSON.stringify(n,null,"\t")),qt&&qt.latencyTestTimings.SetUETimings(n)}else if(t[0]==P.InitialSettings){let t=new TextDecoder("utf-16").decode(e.slice(1)),n=JSON.parse(t);console.log("InitialSettings from ue:"+JSON.stringify(n,null,"\t")),Je=n;var l=document.getElementById("resoulbar");l&&(l.value=Je.Encoder.MaxQP)}else console.warn(`processResponseData data: unrecognised data received, packet ID ${t[0]}`+JSON.stringify(t[0])),console.log(n),console.log(e),console.log(t),console.log(JSON.stringify(t)),console.log()}(e.data)})),e.addEventListener("error",(t=>{console.error(`Data channel error: ${e.label}(${e.id}`,t)})),e}catch(e){return console.warn("Datachannel setup caused an exception: ",e),null}},onicecandidate=function(e){console.log("----- onicecandidate() ICE candidate: ",e),e.candidate?(e.candidate.candidate&&Ht&&Ht.readyState===Gt&&(console.log("-> SS: iceCandidate"),Ht.send(JSON.stringify({type:"iceCandidate",candidate:e.candidate}))),console.warn("onicecandidate()---\x3e e.candidate.type",e.candidate.type),e.candidate.type,"srflx"==e.candidate.type&&(console.warn("The STUN server is reachable!"),console.log(`   Your Public IP Address is: ${e.candidate.address}`)),"relay"==e.candidate.type&&console.warn("The TURN server is reachable !")):console.warn("onicecandidate()---\x3e ICE candidate undefined",new Date)},handleCreateOffer=function(e){e.createOffer(t.sdpConstraints).then((function(t){if(St("audioType"),mungeSDP(t),console.log("------offer.sdp: "+t.sdp),console.warn("111 pc.setLocalDescription(offer)",new Date),e.setLocalDescription(t),console.warn("222 pc.setLocalDescription(offer)",new Date),console.log("------offer.sdp: "+t.sdp),Ht&&Ht.readyState===Gt){let e=JSON.stringify(t);console.log("-> SS: offer:"),Ht.send(e)}}),(function(){console.warn("Couldn't create offer")}))},mungeSDP=function(e){let t=e.sdp.replace(/(a=fmtp:\d+ .*level-asymmetry-allowed=.*)\r\n/gm,"$1;x-google-start-bitrate=10000;x-google-max-bitrate=100000\r\n"),n="maxaveragebitrate=510000;";vn&&(n+="sprop-maxcapturerate=48000;"),n+="stereo=1;",n+="useinbandfec=1",t=t.replace("useinbandfec=1",n),e.sdp=t},handleCreateAnswer111=function(e){e.createAnswer().then((function(t){e.setLocalDescription(t).then((function(){if(console.log("answer %o",t.sdp),Ht&&Ht.readyState===Gt){let e=JSON.stringify(t);console.log("->arvind SS: SendAnswer"),Ht.send(e)}}))}),(function(){console.warn("Couldn't create offer")}))},setupPeerConnection=function(e){e.SetBitrate&&console.log("Hurray! there's RTCPeerConnection.SetBitrate function"),e.onsignalingstatechange=onsignalingstatechange,e.oniceconnectionstatechange=oniceconnectionstatechange,e.onicegatheringstatechange=onicegatheringstatechange,e.ontrack=handleOnTrack,e.onremovetrack=handleTrackRemoved,e.onicecandidate=onicecandidate,e.onnegotiationneeded=function(){console.warn("Negotiation Needed")},e.onicecandidateerrorIsSendToTlegarm=!1,e.onicecandidateerror=function(t){console.warn("onicecandidateerror(): "+t.errorCode),t.errorCode>=300&&t.errorCode<=699||t.errorCode>=700&&t.errorCode<=799&&701==t.errorCode&&(console.warn("Error 701 indicates that none of the ICE candidates were able to successfully make contact with the STUN or TURN server. The 701 error is fired only once per server URL from the list of available STUN or TURN servers provided when creating the RTCPeerConnection "),e.onicecandidateerrorIsSendToTlegarm||(Se("pc.onicecandidateerror event.errorCode: "+t.errorCode,-881818782),e.onicecandidateerrorIsSendToTlegarm=!0))}},generateAggregatedStatsFunction111=function(){return t.aggregatedStats||(t.aggregatedStats={}),function(e){let n={};e.forEach((e=>{"inbound-rtp"!=e.type||e.isRemote||"audio"!=e.mediaType&&!e.id.toLowerCase().includes("audio")?"data-channel"==e.mediaType||e.id.toLowerCase().includes("data")?(n.databytesReceived=e.bytesReceived,n.databytesSent=e.bytesSent):"inbound-rtp"!=e.type||e.isRemote||"video"!=e.mediaType&&!e.id.toLowerCase().includes("video")||(n.timestamp=e.timestamp,n.bytesReceived=e.bytesReceived,n.framesDecoded=e.framesDecoded,n.packetsLost=e.packetsLost,n.bytesReceivedStart=t.aggregatedStats&&t.aggregatedStats.bytesReceivedStart?t.aggregatedStats.bytesReceivedStart:e.bytesReceived,n.framesDecodedStart=t.aggregatedStats&&t.aggregatedStats.framesDecodedStart?t.aggregatedStats.framesDecodedStart:e.framesDecoded,n.timestampStart=t.aggregatedStats&&t.aggregatedStats.timestampStart?t.aggregatedStats.timestampStart:e.timestamp,t.aggregatedStats&&t.aggregatedStats.timestamp&&(t.aggregatedStats.bytesReceived&&(n.bitrate=8*(n.bytesReceived-t.aggregatedStats.bytesReceived)/(n.timestamp-t.aggregatedStats.timestamp),n.bitrate=Math.floor(n.bitrate),n.lowBitrate=t.aggregatedStats.lowBitrate&&t.aggregatedStats.lowBitrate<n.bitrate?t.aggregatedStats.lowBitrate:n.bitrate,n.highBitrate=t.aggregatedStats.highBitrate&&t.aggregatedStats.highBitrate>n.bitrate?t.aggregatedStats.highBitrate:n.bitrate),t.aggregatedStats.bytesReceivedStart&&(n.avgBitrate=8*(n.bytesReceived-t.aggregatedStats.bytesReceivedStart)/(n.timestamp-t.aggregatedStats.timestampStart),n.avgBitrate=Math.floor(n.avgBitrate)),t.aggregatedStats.framesDecoded&&(n.framerate=(n.framesDecoded-t.aggregatedStats.framesDecoded)/((n.timestamp-t.aggregatedStats.timestamp)/1e3),n.framerate=Math.floor(n.framerate),n.lowFramerate=t.aggregatedStats.lowFramerate&&t.aggregatedStats.lowFramerate<n.framerate?t.aggregatedStats.lowFramerate:n.framerate,n.highFramerate=t.aggregatedStats.highFramerate&&t.aggregatedStats.highFramerate>n.framerate?t.aggregatedStats.highFramerate:n.framerate),t.aggregatedStats.framesDecodedStart&&(n.avgframerate=(n.framesDecoded-t.aggregatedStats.framesDecodedStart)/((n.timestamp-t.aggregatedStats.timestampStart)/1e3),n.avgframerate=Math.floor(n.avgframerate)))):n.audiobytesReceived=e.bytesReceived,"track"!=e.type||"video_label"!=e.trackIdentifier&&"video"!=e.kind||(n.framesDropped=e.framesDropped,n.framesReceived=e.framesReceived,n.framesDroppedPercentage=e.framesDropped/e.framesReceived*100,n.frameHeight=e.frameHeight,n.frameWidth=e.frameWidth,n.frameHeightStart=t.aggregatedStats&&t.aggregatedStats.frameHeightStart?t.aggregatedStats.frameHeightStart:e.frameHeight,n.frameWidthStart=t.aggregatedStats&&t.aggregatedStats.frameWidthStart?t.aggregatedStats.frameWidthStart:e.frameWidth),"candidate-pair"==e.type&&e.hasOwnProperty("currentRoundTripTime")&&0!=e.currentRoundTripTime&&(n.currentRoundTripTime=e.currentRoundTripTime)})),n.bitrate,n.framerate,n.framesDropped,n.packetsLost,t.aggregatedStats=n,t.onAggregatedStats&&t.onAggregatedStats(n)}},generateAggregatedStatsFunction=function(){return t.aggregatedStats||(t.aggregatedStats={}),function(e){let n={};e.forEach((e=>{"inbound-rtp"!=e.type||e.isRemote||"video"!=e.mediaType&&!e.id.toLowerCase().includes("video")||(n.timestamp=e.timestamp,n.bytesReceived=e.bytesReceived,n.framesDecoded=e.framesDecoded,n.packetsLost=e.packetsLost,n.bytesReceivedStart=t.aggregatedStats&&t.aggregatedStats.bytesReceivedStart?t.aggregatedStats.bytesReceivedStart:e.bytesReceived,n.framesDecodedStart=t.aggregatedStats&&t.aggregatedStats.framesDecodedStart?t.aggregatedStats.framesDecodedStart:e.framesDecoded,n.timestampStart=t.aggregatedStats&&t.aggregatedStats.timestampStart?t.aggregatedStats.timestampStart:e.timestamp,t.aggregatedStats&&t.aggregatedStats.timestamp&&(t.aggregatedStats.bytesReceived&&(n.bitrate=8*(n.bytesReceived-t.aggregatedStats.bytesReceived)/(n.timestamp-t.aggregatedStats.timestamp),n.bitrate=Math.floor(n.bitrate),n.lowBitrate=t.aggregatedStats.lowBitrate&&t.aggregatedStats.lowBitrate<n.bitrate?t.aggregatedStats.lowBitrate:n.bitrate,n.highBitrate=t.aggregatedStats.highBitrate&&t.aggregatedStats.highBitrate>n.bitrate?t.aggregatedStats.highBitrate:n.bitrate),t.aggregatedStats.bytesReceivedStart&&(n.avgBitrate=8*(n.bytesReceived-t.aggregatedStats.bytesReceivedStart)/(n.timestamp-t.aggregatedStats.timestampStart),n.avgBitrate=Math.floor(n.avgBitrate)),t.aggregatedStats.framesDecoded&&(n.framerate=(n.framesDecoded-t.aggregatedStats.framesDecoded)/((n.timestamp-t.aggregatedStats.timestamp)/1e3),n.framerate=Math.floor(n.framerate),n.lowFramerate=t.aggregatedStats.lowFramerate&&t.aggregatedStats.lowFramerate<n.framerate?t.aggregatedStats.lowFramerate:n.framerate,n.highFramerate=t.aggregatedStats.highFramerate&&t.aggregatedStats.highFramerate>n.framerate?t.aggregatedStats.highFramerate:n.framerate),t.aggregatedStats.framesDecodedStart&&(n.avgframerate=(n.framesDecoded-t.aggregatedStats.framesDecodedStart)/((n.timestamp-t.aggregatedStats.timestampStart)/1e3),n.avgframerate=Math.floor(n.avgframerate)))),"track"!=e.type||"video_label"!=e.trackIdentifier&&"video"!=e.kind||(n.framesDropped=e.framesDropped,n.framesReceived=e.framesReceived,n.framesDroppedPercentage=e.framesDropped/e.framesReceived*100,n.frameHeight=e.frameHeight,n.frameWidth=e.frameWidth,n.frameHeightStart=t.aggregatedStats&&t.aggregatedStats.frameHeightStart?t.aggregatedStats.frameHeightStart:e.frameHeight,n.frameWidthStart=t.aggregatedStats&&t.aggregatedStats.frameWidthStart?t.aggregatedStats.frameWidthStart:e.frameWidth),"candidate-pair"==e.type&&e.hasOwnProperty("currentRoundTripTime")&&0!=e.currentRoundTripTime&&(n.currentRoundTripTime=e.currentRoundTripTime)})),t.aggregatedStats.receiveToCompositeMs&&(n.receiveToCompositeMs=t.aggregatedStats.receiveToCompositeMs,t.latencyTestTimings.SetFrameDisplayDeltaTime(t.aggregatedStats.receiveToCompositeMs)),t.aggregatedStats=n,t.onAggregatedStats&&t.onAggregatedStats(n)}},setupTransceiversAsyncX=async function(e){e.addTransceiver("video",{direction:"recvonly"}),vn||e.addTransceiver("audio",{direction:"recvonly"})},setupTracksToSendAsync=async function(e){if(e.addTransceiver("video",{direction:"recvonly"}),t.useMic){let n=!!t.useMic&&{autoGainControl:!1,channelCount:1,echoCancellation:!1,latency:0,noiseSuppression:!1,sampleRate:16e3,volume:1};const o=await navigator.mediaDevices.getUserMedia({video:!1,audio:n});if(o)for(const t of o.getTracks())t.kind&&"audio"==t.kind&&e.addTransceiver(t,{direction:"sendrecv"});else e.addTransceiver("audio",{direction:"recvonly"})}else e.addTransceiver("audio",{direction:"recvonly"})},this.startLatencyTest=function(e){t.video&&(t.latencyTestTimings.Reset(),t.latencyTestTimings.TestStartTimeMs=Date.now(),e(t.latencyTestTimings.TestStartTimeMs))},this.handleCandidateFromServer=function(e){let n=new RTCIceCandidate(e);t.pcClient.addIceCandidate(n).then((e=>{}))},this.createOffer=function(){if(t.pcClient&&(t.pcClient.close(),t.pcClient=null),console.log("window.RTCPeerConnection:"+window.RTCPeerConnection),null==window.RTCPeerConnection)return Se("window.RTCPeerConnection undefined"),void(navigator.userAgent.includes("Firefox")?window.location="/assets/pages/RTCPeerConnectionDisabled.htm":window.location="/assets/pages/webRtcBlocked.htm");t.pcClient=new RTCPeerConnection(t.cfg),t.useMic=vn,setupTracksToSendAsync(t.pcClient).finally((function(){setupPeerConnection(t.pcClient),t.dcClient=createDataChannel(t.pcClient,"cirrus",t.dataChannelOptions),handleCreateOffer(t.pcClient)}))},this.receiveOffer=function(e){console.error("AHSAN. receiveOffer() recoived an unhandled offer :",e)},this.receiveAnswer=function(e){var n=new RTCSessionDescription(e);!async function(e,t){await e.pcClient.setRemoteDescription(t).then((function(){setTimeout((function(){}),5e3)})).catch((function(e){e?we("setRemoteDescription:"+e):(et("setRemoteDescription: reloading to test",{color:"Red"}),setTimeout((function(){location.reload()}),5e3))}))}(t,n)},this.close=function(){t.pcClient&&(t.pcClient.close(),t.pcClient=null),t.aggregateStatsIntervalId&&clearInterval(t.aggregateStatsIntervalId)},this.send=function(e){t.dcClient&&"open"==t.dcClient.readyState&&t.dcClient.send(e)},this.getStats=function(e){t.pcClient&&e&&t.pcClient.getStats(null).then((t=>{e(t)}))},this.aggregateStats=function(e){let n=generateAggregatedStatsFunction();t.aggregateStatsIntervalId=setInterval((()=>{t.getStats(n)}),e)}}var Bn=1;function In(e){capBpsCmd="Encoder.MaxBitrate "+e;let t={Console:capBpsCmd};b(t),console.log(t)}function kn(e){capFpsCmd="t.maxFPS "+e;let t={Console:capFpsCmd};b(t),console.log(t)}function Tn(e){var t=document.getElementById("player");Mt=document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement&&null!==document.msFullscreenElement||document.fullscreenElement&&null!==document.fullscreenElement||t&&t.classList.contains("fullscreen");let n=document.getElementById("fullscreen-img");n&&(n.src=Mt?"https://d35e1ftufisrhj.cloudfront.net/v1/assets/images/MinimiseToFullscreen.png":"https://d35e1ftufisrhj.cloudfront.net/v1/assets/images/MaximiseToFullscreen.png",n.alt=Mt?"Shrink to normal size":"Maximise to Fullscreen")}function Cn(){Mt?On():xn()}function xn(){/iPad|iPhone|iPod/.test(navigator.userAgent)&&window.MSStream;var e=document.getElementById("player"),t=document.getElementsByClassName("text"),n=document.getElementById("header-tbl"),o=e.requestFullscreen;if(o||["mozRequestFullScreen","msRequestFullscreen","webkitRequestFullScreen"].forEach((function(t){o=o||e[t]})),o)o.call(e).catch((function(e){et("Switching to Full Screen rejected due to no activity from user"),we("Fullscreen request failed:",-572005528),we(e,-572005528),console.error("Fullscreen request failed:",e)}));else{if(e&&(e.classList.add("fullscreen"),e.classList.remove("fixed-size")),t)for(let e=0;e<t.length;e++)t[e].style.display="none";n&&(n.style.display="none"),Tn(),An()}}function On(){var e=document.getElementById("player"),t=document.getElementsByClassName("text"),n=document.getElementById("header-tbl"),o=document.exitFullscreen;if(o||["mozCancelFullScreen","msExitFullscreen","webkitExitFullscreen"].forEach((function(e){o=o||document[e]})),o)o.call(document);else{if(e&&(e.classList.remove("fullscreen"),e.classList.add("fixed-size"),e.style.left=""),t)for(let e=0;e<t.length;e++)t[e].style.display="block";n&&(n.style.display="table"),Tn(),An()}}function An(){var e=document.getElementById("player");let t=e.getElementsByTagName("VIDEO");if(document.documentElement.style.position=Mt?"fixed":"",document.body.style.position=Mt?"fixed":"",Mt){let n=window.innerHeight/window.innerWidth,o=e.clientHeight/e.clientWidth,i=t.videoHeight/t.videoWidth;isNaN(i)?(M=window.innerWidth,D=window.innerHeight,R=0,N=Math.floor(.5*(window.innerWidth-M)),e.style.width=M+"px",e.style.height=D+"px"):n<o?(M=Math.floor(window.innerHeight/i),D=window.innerHeight,R=0,N=Math.floor(.5*(window.innerWidth-M)),e.style.width=M+"px",e.style.height=D+"px"):(M=window.innerWidth,D=Math.floor(window.innerWidth*i),R=Math.floor(.5*(window.innerHeight-D)),N=0,e.style.width=M+"px",e.style.height=D+"px")}else e.style.height="",e.style.width=""}function Pn(e,t,n){var o=document.getElementById(e);o&&(o.onclick=function(o){console.log("-> "+e),v(t,n)})}function Mn(){console.log("*****captureScreenShot method invoked*****");var e=window.innerWidth,t=window.innerHeight,n=(new Date).getTime(),o=document.getElementById("canvas"),i=o.getContext("2d");o.width=e,o.height=t;var a=document.getElementsByTagName("video");i.drawImage(a[0],0,0,e,t);var r=o.toDataURL("image/png").replace("image/png","image/octet-stream"),l=document.createElement("a");l.setAttribute("download",n+"_screenshot.png"),l.setAttribute("href",r),l.click()}const Dn={LockedMouse:0,HoveringMouse:1};var Rn={controlScheme:Dn.HoveringMouse,suppressBrowserKeys:!0,fakeMouseWithTouches:!1};function Nn(e,t,n,o){if(vt)return;jt&&(console.log(`x: ${e}, y:${t}, dX: ${n}, dY: ${o}`),document.getElementById("skip_video").style.display="block",document.getElementById("skip_video").innerHTML=`x: ${e}, y:${t}, dX: ${n}, dY: ${o}`);let i=sn(e,t),a=cn(n,o);var r=new DataView(new ArrayBuffer(9));r.setUint8(0,w.MouseMove),r.setUint16(1,i.x,!0),r.setUint16(3,i.y,!0),r.setInt16(5,a.x,!0),r.setInt16(7,a.y,!0),A(r.buffer)}var Ln=!1;function Fn(e,t,n){jt&&console.log(`mouse button ${e} down at (${t}, ${n})`);let o=sn(t,n),i=new DataView(new ArrayBuffer(6));i.setUint8(0,w.MouseDown),i.setUint8(1,e),i.setUint16(2,o.x,!0),i.setUint16(4,o.y,!0),A(i.buffer)}function _n(e,t,n){if(vt)return;if(jt&&console.log(`mouse button ${e} up at (${t}, ${n})`),("Mac"!=Zt.os.name||2!=e||Ln)&&"Mac"==Zt.os.name&&2==e&&Ln)return;let o=sn(t,n);var i=new DataView(new ArrayBuffer(6));i.setUint8(0,w.MouseUp),i.setUint8(1,e),i.setUint16(2,o.x,!0),i.setUint16(4,o.y,!0),A(i.buffer)}function Un(e,t,n){if(vt)return;jt&&console.log(`mouse wheel with delta ${e} at (${t}, ${n})`);let o=sn(t,n);var i=new DataView(new ArrayBuffer(7));i.setUint8(0,w.MouseWheel),i.setInt16(1,e,!0),i.setUint16(3,o.x,!0),i.setUint16(5,o.y,!0),A(i.buffer)}const Jn={MainButton:0,AuxiliaryButton:1,SecondaryButton:2,FourthButton:3,FifthButton:4},Wn={PrimaryButton:1,SecondaryButton:2,AuxiliaryButton:4,FourthButton:8,FifthButton:16};function $n(e,t,n){e&Wn.PrimaryButton&&_n(Jn.MainButton,t,n),e&Wn.SecondaryButton&&_n(Jn.SecondaryButton,t,n),e&Wn.AuxiliaryButton&&_n(Jn.AuxiliaryButton,t,n),e&Wn.FourthButton&&_n(Jn.FourthButton,t,n),e&Wn.FifthButton&&_n(Jn.FifthButton,t,n)}function Hn(e,t,n){e&Wn.PrimaryButton&&Fn(Jn.MainButton,t,n),e&Wn.SecondaryButton&&Fn(Jn.SecondaryButton,t,n),e&Wn.AuxiliaryButton&&Fn(Jn.AuxiliaryButton,t,n),e&Wn.FourthButton&&Fn(Jn.FourthButton,t,n),e&Wn.FifthButton&&Fn(Jn.FifthButton,t,n)}function qn(e){var t=e.width/2,n=e.height/2;function o(){document.pointerLockElement===e||document.mozPointerLockElement===e?(console.log("Pointer locked"),document.addEventListener("mousemove",i,!1)):(console.log("The pointer lock status is now unlocked"),document.removeEventListener("mousemove",i,!1))}function i(e){t+=e.movementX,n+=e.movementY,t>M&&(t-=M),n>D&&(n-=D),t<0&&(t=M+t),n<0&&(n=D-n),Nn(t,n,e.movementX,e.movementY)}e.requestPointerLock=e.requestPointerLock||e.mozRequestPointerLock,document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock,e.onclick=function(){e.requestPointerLock()},document.addEventListener("pointerlockchange",o,!1),document.addEventListener("mozpointerlockchange",o,!1),e.onmousedown=function(e){g(),Fn(e.button,t,n)},e.onmouseup=function(e){g(),_n(e.button,t,n)},e.onmousewheel=function(e){g(),Un(e.wheelDelta,t,n)},e.pressMouseButtons=function(e){Hn(e.buttons,t,n)},e.releaseMouseButtons=function(e){$n(e.buttons,t,n)}}var Vn,jn=void 0;function Gn(e){if(null==lt)return clearTimeout(jn),void(jn=setTimeout((function(){console.log("registerTouchEvents---\x3e ue4ExeInfo == undefined"),Gn(e)}),1e3));console.log("ue4ExeInfo.versionString: "+lt.versionString),null==lt.versionString||"4.27.1.0"==lt.versionString||"4.27.2.0"==lt.versionString||lt.versionString.startsWith("5.")?function(e){let t=[9,8,7,6,5,4,3,2,1,0],n={};function o(e){let o=t.pop();void 0===o&&console.log("exhausted touch indentifiers"),n[e.identifier]=o}function i(t,o){let i=new DataView(new ArrayBuffer(2+7*o.length));i.setUint8(0,t),i.setUint8(1,o.length);let a=2;for(let t=0;t<o.length;t++){let r=o[t],l=r.clientX-e.offsetLeft,s=r.clientY-e.offsetTop;jt&&console.log(`F${n[r.identifier]}=(${l}, ${s})`);let c=sn(l,s);i.setUint16(a,c.x,!0),a+=2,i.setUint16(a,c.y,!0),a+=2,i.setUint8(a,n[r.identifier],!0),a+=1,i.setUint8(a,255*r.force,!0),a+=1,i.setUint8(a,c.inRange?1:0,!0),a+=1}A(i.buffer)}if(Rn.fakeMouseWithTouches){let t;e.ontouchstart=function(n){if(void 0===t){let o=n.changedTouches[0];t={id:o.identifier,x:o.clientX-ln.left,y:o.clientY-ln.top},e.onmouseenter(n),Fn(Jn.MainButton,t.x,t.y)}n.preventDefault()},e.ontouchend=function(n){for(let o=0;o<n.changedTouches.length;o++){let i=n.changedTouches[o];if(null!=t&&i.identifier===t.id){let o=i.clientX-ln.left,a=i.clientY-ln.top;_n(Jn.MainButton,o,a),e.onmouseleave(n),t=void 0;break}}n.preventDefault()},e.ontouchmove=function(e){for(let n=0;n<e.touches.length;n++){let o=e.touches[n];if(null!=t&&o.identifier===t.id){let e=o.clientX-ln.left,n=o.clientY-ln.top;Nn(e,n,e-t.x,n-t.y),t.x=e,t.y=n;break}}e.preventDefault()}}else e.ontouchstart=function(e){for(let t=0;t<e.changedTouches.length;t++)o(e.changedTouches[t]);jt&&console.log("touch start"),i(w.TouchStart,e.changedTouches),e.preventDefault()},e.ontouchend=function(e){jt&&console.log("touch end"),i(w.TouchEnd,e.changedTouches);for(let i=0;i<e.changedTouches.length;i++)o=e.changedTouches[i],t.push(n[o.identifier]),delete n[o.identifier];var o;e.preventDefault()},e.ontouchmove=function(e){jt&&console.log("touch move"),i(w.TouchMove,e.touches),e.preventDefault()}}(e):function(e){var t=[9,8,7,6,5,4,3,2,1,0],n={};function o(e){let o=t.pop();void 0===o&&console.log("exhausted touch indentifiers"),n[e.identifier]=o}function i(t,o){if(vt)return;let i=new DataView(new ArrayBuffer(2+6*o.length));i.setUint8(0,t),i.setUint8(1,o.length);let a=2;for(let t=0;t<o.length;t++){let r=o[t],l=r.clientX.clamp(1,e.clientWidth-5)-e.offsetLeft,s=r.clientY.clamp(1,e.clientHeight-5)-e.offsetTop;jt&&console.log(`F${n[r.identifier]}=(${l}, ${s})`);let c=sn(l,s);i.setUint16(a,c.x,!0),a+=2,i.setUint16(a,c.y,!0),a+=2,i.setUint8(a,n[r.identifier],!0),a+=1,i.setUint8(a,255*r.force,!0),a+=1}A(i.buffer)}if(Rn.fakeMouseWithTouches){var a=void 0;e.ontouchstart=function(t){if(void 0===a){let n=t.changedTouches[0];a={id:n.identifier,x:n.clientX-ln.left,y:n.clientY-ln.top},e.onmouseenter(t),Fn(Jn.MainButton,a.x,a.y)}t.preventDefault()},e.ontouchend=function(t){g();for(let n=0;n<t.changedTouches.length;n++){let o=t.changedTouches[n];if(null!=a&&o.identifier===a.id){let n=o.clientX-ln.left,i=o.clientY-ln.top;_n(Jn.MainButton,n,i),e.onmouseleave(t),a=void 0;break}}t.preventDefault()},e.ontouchmove=function(e){for(let t=0;t<e.touches.length;t++){let n=e.touches[t];if(null!=a&&n.identifier===a.id){let e=n.clientX-ln.left,t=n.clientY-ln.top;Nn(e,t,e-a.x,t-a.y),a.x=e,a.y=t;break}}e.preventDefault()}}else e.ontouchstart=function(e){for(let t=0;t<e.changedTouches.length;t++)o(e.changedTouches[t]);jt&&console.log("touch start"),i(w.TouchStart,e.changedTouches),e.preventDefault(),clearInterval(Yt),clearTimeout(Kt),ne=!1,Yt=setInterval(te,10),Kt=setTimeout((function(){clearInterval(Yt)}),1e3)},e.ontouchend=function(e){g(),jt&&console.log("touch end"),i(w.TouchEnd,e.changedTouches);for(let i=0;i<e.changedTouches.length;i++)e.changedTouches[i],o=e.changedTouches[i],t.includes(n[o.identifier])||(t.push(n[o.identifier]),t.sort((function(e,t){return t-e}))),o.identifier in n&&delete n[o.identifier];var o;e.preventDefault()},e.ontouchmove=function(e){jt&&console.log("touch move"),i(w.TouchMove,e.touches),e.preventDefault()}}(e)}function zn(e){console.log("restartAnimationText---\x3e : "+e)}function Xn(){var e=qt.video;if(e.paused)console.log("Status: Paused");else if(e.ended)console.log("Status: Stopped");else if(e.readyState>2)return void console.log("Status: Playing");requestAnimationFrame(Xn)}function Qn(){var e=document.getElementById("streamingVideo");if(e&&(e.style.backgroundColor="black"),qt){Bn=2,W(),qt.video.play().then((()=>{})).catch((e=>{Xn(),"The request is not allowed by the user agent or the platform in the current context, possibly because the user denied permission."!=e.message&&(console.log("xxxx Error.message : "+e.message),console.log("xxxx error.name : ",e.name),console.log("xxxx error.stack : ",e.stack),Se("webRtcPlayerObj.video.play() error: "+e,-937307130),eo(2),Kn("clickableState",(e=>{Qn()})))}));try{qt.handleOnAudioTrack(rt)}catch(e){console.log("Error in webRtcPlayerObj.handleOnAudioTrack(): "+e.message)}var t=document.getElementById("videoPlayOverlay");t&&(t.style.display="none"),document.getElementById("bottm_left_slider");var n=document.getElementById("e3ds_draggable");n&&(1==Ue.shouldDisplayContorlBar||null==Ue.shouldDisplayContorlBar?n.style.display="block":n.style.display="none"),1==Et&&(document.getElementById("flow-meeting")&&(document.getElementById("flow-meeting").style.display="block"),document.getElementById("voipControlPanel")&&(document.getElementById("voipControlPanel").style.display="flex"),document.getElementById("e3ds_bottom_panelObj_left_bottom")&&(document.getElementById("e3ds_bottom_panelObj_left_bottom").style.display="block"));var o={type:"stage5_playBtnPressed"};Y(),m(o),b(o),"undefined"!=typeof e3ds_controller&&(e3ds_controller.sendToUnreal=function(e){b(e)}),to()}A(new Uint8Array([w.RequestInitialSettings]).buffer),y(),j(),to();var i=document.getElementById("overlay");if(i){if(null!=mt){let e=document.getElementById("overlayButton");i.style.display="block",e.style.display="block"}if(null!=ft){let e=document.getElementById("GuestSettings");"none"===e.style.display||""===e.style.display?(i.style.display="block",e.style.display="block"):(i.style.display="block",e.style.display="none")}if(0!=St("showPsControl")){let e=document.getElementById("overlayButton");i.style.display="block",e.style.display="block",i.style.display="block",document.getElementById("overlayPSSettings").style.display="block"}if(0!=St("showWebrtcCtrlMenu")&&null!=St("showWebrtcCtrlMenu")){let e=document.getElementById("overlayButton");i.style.display="block",e.style.display="block",i.style.display="block",document.getElementById("overlayWebrtcCtrlMenu").style.display="block"}}}function Yn(){1==Lt?Qn():(eo(2),Kn("clickableState",(e=>{Qn()})))}function Kn(e,t){console.log("setOverlayCustom---\x3e 11111111111111111: "),an=!1;var n=document.getElementById("clickToPlay");if(!n){var o=document.getElementById("player");(n=document.createElement("div")).id="videoPlayOverlay",o.appendChild(n)}for(;n.lastChild;)n.removeChild(n.lastChild);var i=document.getElementById("playButton");if(!i){var a=document.createElement("img");a.id="playButton",a.src=null!=wt?wt:"https://d35e1ftufisrhj.cloudfront.net/v1/assets/images/Play_button2.png",a.alt="!!!!!",a&&n.appendChild(a),i=a}i.style.display="block",n.style.display="block",m({type:"stage4_playBtnShowedUp"}),t&&n&&n.addEventListener("click",(function e(o){t(o),n.removeEventListener("click",e),document.getElementById("videoPlayOverlay")&&(n.style.display="none")})),n&&n.classList.add(e)}function Zn(e){console.log("showTextOverlay---\x3e "+e),et(e,{timeout:2e3,color:"blue"});var t=document.createElement("div");t.id="messageOverlay",t.innerHTML=e||""}function eo(e){console.log("showLoader: "+e),to(),obj=document.getElementById("loaderStep"+e),obj?obj.style.display="flex":console.log("loaderStep"+e+" does not exist")}function to(){var e=document.getElementById("loaderStep1");e?e.style.display="none":console.log("loaderStep1 does not exist"),(e=document.getElementById("loaderStep2"))?e.style.display="none":console.log("loaderStep2 does not exist"),(e=document.getElementById("loaderStep3"))?e.style.display="none":console.log("loaderStep3 does not exist")}var no=void 0,oo=void 0,io=void 0,ao=0,ro=!0;function lo(){let e=document.getElementById("player"),t=e.getElementsByTagName("video");if(e&&t.length>0){let n=e.clientHeight/e.clientWidth,o=t[0].videoHeight/t[0].videoWidth;if(n>o){jt&&console.log("Setup Normalize and Quantize for playerAspectRatio > videoAspectRatio");let t=n/o;sn=(n,o)=>{let i=n/e.clientWidth,a=t*(o/e.clientHeight-.5)+.5;return i<0||i>1||a<0||a>1?{inRange:!1,x:65535,y:65535}:{inRange:!0,x:65536*i,y:65536*a}},unquantizeAndDenormalizeUnsigned=(n,o)=>{let i=(o/65536-.5)/t+.5;return{x:n/65536*e.clientWidth,y:i*e.clientHeight}},cn=(n,o)=>({x:n/(.5*e.clientWidth)*32767,y:t*o/(.5*e.clientHeight)*32767})}else{jt&&console.log("Setup Normalize and Quantize for playerAspectRatio <= videoAspectRatio");let t=o/n;sn=(n,o)=>{let i=t*(n/e.clientWidth-.5)+.5,a=o/e.clientHeight;return i<0||i>1||a<0||a>1?{inRange:!1,x:65535,y:65535}:{inRange:!0,x:65536*i,y:65536*a}},unquantizeAndDenormalizeUnsigned=(n,o)=>{let i=o/65536;return{x:((n/65536-.5)/t+.5)*e.clientWidth,y:i*e.clientHeight}},cn=(n,o)=>({x:t*n/(.5*e.clientWidth)*32767,y:o/(.5*e.clientHeight)*32767})}}}m({type:"stage1_inqueued"});var so=void 0;function co(e){if(ro){var t=document.getElementById("player");if(!t)return so&&clearTimeout(so),void(so=setTimeout((function(){co()}),100));ln=t.getBoundingClientRect(),lo(),t.classList.contains("fixed-size")||(window.innerWidth<t.videoWidth||(window.innerHeight,t.videoHeight),function(e){let t=e.getElementsByTagName("VIDEO"),n=window.innerHeight/window.innerWidth,o=e.clientHeight/e.clientWidth,i=t.videoHeight/t.videoWidth;var a;isNaN(i)?(M=window.innerWidth,D=window.innerHeight,a="top: "+(R=0)+"px; left: "+(N=0)+"px; width: "+M+"px; height: "+D+"px; "+xt):n<o?(M=Math.floor(window.innerHeight/i),D=window.innerHeight,R=0,N=Math.floor(.5*(window.innerWidth-M)),a="top: "+R+"px; left: "+N+"px; width: "+M+"px; height: "+D+"px; cursor: "+styleCursor+"; "+xt):(M=window.innerWidth,D=Math.floor(window.innerWidth*i),a="top: "+(R=Math.floor(.5*(window.innerHeight-D)))+"px; left: "+(N=0)+"px; width: "+M+"px; height: "+D+"px; cursor: "+styleCursor+"; "+xt),function(e,t){console.log("style:  "+t),null!=Tt?document.getElementById("videoPlayOverlay").style=`${t};background-image: url("${Tt}");`:e.style=t}(e,a)}(t))}}function uo(){if(document.getElementById("voipUserName")&&kt&&kt.city){var e="player";kt&&kt.city&&(e=kt.city,console.warn("setVoipUserName() city unknown")),document.getElementById("voipUserName").value=e+"_"+Bo(3333)}}function go(){ro=!0;var e=void 0;null!=Ue?((e={}).type="takeIdentity",e.clientType="player",e.configName=yt,e.configurationObj=Ue,e.serverOwner=Ue.owner,e.appName=Ue.appName,e.userAgent=navigator.userAgent,e.GuestMeetingId=ft,e.url=window.location.href,e.userDeviceInfo=Zt,e.clientInfo=kt,e.version_fe_lib=je):e={type:"takeIdentity",clientType:"player",configurationObj:Ue,userAgent:navigator.userAgent,serverOwner:window.location.pathname.substring(1),isIniFrame:dn(),url:window.location.href,href_emulated:ge,appName:St("appName"),userDeviceInfo:Zt,clientInfo:kt},console.log("77777 ws4queue.send(): "+JSON.stringify(e)),oo.send(JSON.stringify(e))}function mo(e){var t=document.getElementById("streamingVideo"),n=nt[e];console.log("videoPlay() :",e,n),t.setAttribute("src",n),t.setAttribute("type","video/mp4"),t.autoplay=!0,Ze(t,!0),t.load();var o=document.getElementById("videoPlayOverlay");o&&(o.style.display="none")}co();var fo=0;function po(e){console.log("showPageWIthMsg: "+e),self.location="/error/"+btoa(e).toString("base64")}function yo(){null!=kt&&null!=Ue&&null!=Ue.EmulatedGeoLocationInfo&&""!=Ue.EmulatedGeoLocationInfo.longitude&&""!=Ue.EmulatedGeoLocationInfo.latitude&&(kt.latitude=Ue.EmulatedGeoLocationInfo.latitude,kt.longitude=Ue.EmulatedGeoLocationInfo.longitude,kt.city="emulated_"+kt.city,kt.country_name="emulated_"+kt.country_name)}var vo=!1;function ho(e){if(!vo){if(vo=!0,null==Ue&&null!=e.appconfig&&(Ue=e.appconfig),function(){var e=St("loadingVideoList");if(null!=e&&(nt=e),""!=(l=St("BGI"))&&(nt.length>0||(gt=l,W())),""!=(l=St("BGI4Queue"))&&(Tt=l,co()),""!=(l=St("Logo"))&&null!=l&&"undefined"!=l)if(nt.length>0);else{if(null!=(ut=l)){var t=document.getElementById("prgoressScreenLogo1img"),n=document.getElementById("playBtnScreenLogo1img");t.src=ut,n.src=ut,t&&(t.style.display="block"),n&&(n.style.display="block")}var o=document.getElementById("prgoressScreenLogo1");null!=o&&(o.style.display="block")}""!=(l=St("PlayBtn"))&&(wt=l);let i=St("TitleBarIcon");if(""!=i&&null!=i||(i="https://d35e1ftufisrhj.cloudfront.net/v1/assets/images/0.png"),""!=i&&null!=i){var a=document.createElement("link"),r=document.getElementById("TitleBarIcon");a.id="TitleBarIcon",a.rel="shortcut icon",a.href=i,r&&document.head.removeChild(r),document.head.appendChild(a)}var l;if(""!=(l=St("LoadingImg")))if(nt.length>0);else{var s=l,c=document.getElementById("prgoressScreenLoadingimg");null!=s&&c&&(c.src=s),c&&(c.style.display="block")}}(),null!=Ue.closeTabOnLosingVisbility&&1==Ue.closeTabOnLosingVisbility&&document.addEventListener("visibilitychange",(function(){if(console.log(document.visibilityState),"hidden"===document.visibilityState){console.log("XZZZZZZ Page minimized"),console.log("XZZZZZZ 11  window.close() cmd getting called;");try{if(!window.close)throw new Error("window.close is not supported");if(window.close(),!window.closed)throw new Error("Failed to close the window")}catch(e){console.error("Error:",e),et("Scripts may close only the windows that were opened by them.",{color:"red",timeout:5e3})}}})),xo(),he=Ue.mustLogin,vn=null!=Ue.UseMicrophone&&1==Ue.UseMicrophone,null!=Ue.urlExpiretime){if(new Date>new Date(Ue.urlExpiretime))return void po("Url Expired");if("undefined"!=typeof e3ds_controller)if(null!=e3ds_controller.configurationToOverride){var n=e3ds_controller.configurationToOverride;console.log(" found e3ds_controller.configurationToOverride:"+JSON.stringify(n));const e=Object.keys(n);for(let t=0;t<e.length;t++){const i=e[t],a=n[i];var o=Ue[i];Ue[i]=a,console.log("newValue --\x3e "+a),console.log("updateAppConfig --\x3e "+i+" , "+o+" , "+Ue[i])}}else console.log("not found e3ds_controller.configuration");else console.log("not found updateAppConfig");"function"==typeof onConfigAcquire?onConfigAcquire():console.log("not found onConfigAcquire"),e3ds_controller.callbacks&&"function"==typeof e3ds_controller.callbacks.onConfigAcquire?e3ds_controller.callbacks.onConfigAcquire():console.log("not found e3ds_controller.callbacks.onConfigAcquire")}var i;dn(),Ue.serverOwner=fe,Ue.appName=pt,Ue.hostMeetingId=mt,Ue.GuestMeetingId=ft,function(){if(urlParams){var e=urlParams;for(var[t,n]of e.entries())for(const[e,o]of Object.entries(Ue))if(e==t){n!=o&&("cmdLineArgs"!=e&&"exeLunchArgs"!=e||1==Ue.shouldAppendOveridingcmdLineArgs&&(console.log("cmdLineArgs/exeLunchArgs  urlParams:   "+n),console.log("cmdLineArgs/exeLunchArgs  configurationObj:   "+o),n=o+" "+n,console.log("cmdLineArgs/exeLunchArgs  new:   "+n)),1==Ue.shouldAppendOveridingcmdLineArgs&&(console.log("overiridng config value. Old value   "+t+" :"+n),console.log(`new value ${e}: ${o}`)),Ue[e]=n);break}}if(null!=(i=St("isAdminDebugging"))&&(ue=i),dt(ue),1==ue){console.log("url: "+Ge),console.log("urlVersion: "+ze),console.log("href_emulated: "+ge),console.log("pathname: "+Xe),console.log("urlParams: ",urlParams),console.log(" 1111111111111 isAdminDebugging > "+ue),console.log(Ye),console.log("accessedTopLevelDomainName: "+Ke),function(){for(var e=performance.getEntriesByType("navigation"),t=0;t<e.length;t++){var n=e[t];switch(console.log("Page loading type = "+n.type),n.type,n.type){case"navigate":console.log("Navigation started by clicking a link, entering the URL in the browser's address bar, form submission, or initializing through a script operation other than reload and back_forward as listed below.");break;case"reload":console.log(" Navigation is through the browser's reload operation or location.reload()");break;case"back_forward":console.log("Navigation is through the browser's history traversal operation");break;case"prerender":console.log(" Navigation is initiated by a prerender hint");break;default:console.log("p.type: unknown")}}}(),console.log("navigator.userAgent: "+navigator.userAgent),console.log("isIniFrame() : "+dn());var o=document.referrer;console.log("referrer:"+o),console.log("XXXXX configurationObj : "+JSON.stringify(Ue))}null!=(i=St("showbrowserMouse"))&&(Bt=i),console.log(" 1111111111111 showbrowserMouse > "+Bt),z.enabled=Ue.isAfkEnabled,z.warnTimeout=60*Ue.afkWarnTimeout,z.closeTimeout=60*Ue.afkCloseTimeout;var i,a=document.getElementById("screenshot-img");if(a&&(1==Ue.enableScreenshot?a.style.display="block":0==Ue.enableScreenshot&&(a.style.display="none")),Et=St("useVOIP"),console.log(" 1111111111111 useVOIP > "+Et),1==Et){var r=St("voipRoomName");""!=r&&null!=r?(document.getElementById("room_number")&&(document.getElementById("room_number").value=fe+":"+r),document.getElementById("voipControlPanel")&&(document.getElementById("voipControlPanel").style.display="flex"),document.getElementById("e3ds_bottom_panelObj_left_bottom")&&(document.getElementById("e3ds_bottom_panelObj_left_bottom").style.display="block"),navigator.permissions||/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream&&window.e3ds_alert("IOS browsers might not support Eagle VoIP system",{timeout:5e3}),document.getElementById("create_room")&&document.getElementById("create_room").click()):(Et=0,window.e3ds_alert("No Room Name found in Voip config. So VOIP Disabled"))}if(null!=(i=St("useExtendedTyping"))&&(bt=i),console.log(" 1111111111111 useExtendedTyping > "+bt),Bt=St("showbrowserMouse"),Wt(),null!=(i=St("isSpectator"))&&(vt=i),null!=St("GuestMeetingId")&&(vt=!0),console.log(" 1111111111111 isSpectator > "+vt),null!=(i=St("forceMeetingMode"))&&(ht=i),2==ht?vt=!0:1==ht&&(vt=!1),console.log(" 1111111111111 forceMeetingMode > "+ht),console.log(" 2222222 forceMeetingMode--\x3e isSpectator > "+vt),Jt=St("MouseControlScheme"),console.log(" ***************1111111111111 MouseControlScheme:"+Jt),null!=Jt)switch(!0){case 0==Jt:Rn.controlScheme=Dn.LockedMouse;break;case 1==Jt:Rn.controlScheme=Dn.HoveringMouse;break;default:console.log(" ***************2222222222 nada:"+Jt)}if(console.log(" ***************1111111111111 inputOptions.controlScheme:"+Rn.controlScheme),null!=(i=St("ShouldAutoPlay"))&&(Lt=i),"undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),1==Lt||nt.length>0?Nt=!0:0==Lt&&(Nt=!1),dn(),console.log(" 1111111111111 ShouldAutoPlay > "+Lt),console.log(" 1111111111111 flag4unMuteAudio4AutoPlay > "+Nt),null!=(i=St("fakeMouseWithTouches"))&&(Ft=i),console.log(" 1111111111111 fakeMouseWithTouches > "+Ft),null!=(i=St("suppressBrowserKeys"))&&(_t=i),console.log(" 1111111111111 suppressBrowserKeys > "+_t),0==Ft?Rn.fakeMouseWithTouches=!1:1==Ft&&(Rn.fakeMouseWithTouches=!0),0==_t?Rn.suppressBrowserKeys=!1:1==_t&&(Rn.suppressBrowserKeys=!0),i=St("expireOn"),console.log(" 1111111111111 expireOn > "+Ut),i&&i.endsWith("minutes")){i=i.split("minutes")[0];var l=parseFloat(i);Number.isNaN(l)||(Ut=60*l*1e3)}else l=parseFloat(i),Number.isNaN(l)||(Ut=l);console.log(" 222222222 expireOn > "+Ut),Z()}(),yo(),window.addEventListener("resize",co,!0),console.log("5555555555555555555  load()"),co(),function(){document.addEventListener&&(document.addEventListener("webkitfullscreenchange",Tn,!1),document.addEventListener("mozfullscreenchange",Tn,!1),document.addEventListener("fullscreenchange",Tn,!1),document.addEventListener("MSFullscreenChange",Tn,!1)),window.addEventListener("resize",J,!0),window.addEventListener("orientationchange",t),console.log("5555555555555555555  load()"),window.addEventListener("message",I,!1),W(),null!==(zt=document.getElementById("quality-control-ownership-tgl"))&&(zt.onchange=function(e){y()});let e=document.getElementById("overlayButton");null!==e&&(e.onclick=function(e){!function(){if(null!=mt||1==ht){let e=document.getElementById("hostSettings");"none"===e.style.display||""===e.style.display?e.style.display="block":e.style.display="none"}if(null!=ft){let e=document.getElementById("GuestSettings");"none"===e.style.display||""===e.style.display?e.style.display="block":e.style.display="none"}if(1==St("showPsControl")){let e=document.getElementById("overlayPSSettings");"none"===e.style.display||""===e.style.display?e.style.display="block":"block"===e.style.display&&(e.style.display="none")}else document.getElementById("overlayPSSettings").style.display="none";if(1==St("showWebrtcCtrlMenu")){let e=document.getElementById("overlayWebrtcCtrlMenu");"none"===e.style.display||""===e.style.display?e.style.display="block":"block"===e.style.display&&(e.style.display="none")}else document.getElementById("overlayWebrtcCtrlMenu").style.display="none"}()});let n=document.getElementById("ConsoleCmd_submit");null!==n&&(n.onclick=function(e){E({ConsoleCommand:document.getElementById("ConsoleCmd_text").value})}),document.getElementById("randomMovementBtn")&&document.getElementById("randomMovementBtn").addEventListener("click",generateRandomKeypress),document.getElementById("stopRandomMovementBtn")&&document.getElementById("stopRandomMovementBtn").addEventListener("click",(()=>{clearInterval(intervalTime)}));let o=document.getElementById("btnPasswordSubmit");null!==o&&(o.onclick=function(e){e.preventDefault(),document.getElementById("PasswordToVerify").value==Ue.passwordToStart?(document.getElementById("popupForPasswordToStart").style.display="none",document.getElementById("videoPlayOverlay").style.display="flex",document.getElementById("streamingVideo").style.display="block",Ce=new Date,wo()):(document.getElementById("alert__box").style.top="50px",document.getElementById("alert__close").addEventListener("click",(e=>{e.preventDefault(),(document.getElementById("alert__box").style.top="50px")&&(document.getElementById("alert__box").style.top="-50%")})))});let i=document.getElementById("btnPasswordCanecl");null!==i&&(i.onclick=function(e){e.preventDefault(),window.location="/assets/pages/kickedOut.htm"});let a=document.getElementById("info4injectCopyBtn");null!==a&&a.addEventListener("click",(function(e){let t=document.getElementById("Info4injectStreamFromEditor");t.select(),navigator.clipboard.writeText(t.value).then((()=>{e3ds_alert("Copied Successfully!",{color:"blue"})})).catch((()=>{}))}));let r=document.getElementById("prioritise-quality-tgl"),l=document.getElementById("quality-params-submit");null!==r&&(r.onchange=function(e){if(r.checked){let e={PrioritiseQuality:1,LowBitrate:document.getElementById("low-bitrate-text").value,HighBitrate:document.getElementById("high-bitrate-text").value,MinFPS:document.getElementById("min-fps-text").value};h(e),console.log(e),l.onclick=function(e){let t={PrioritiseQuality:1,LowBitrate:document.getElementById("low-bitrate-text").value,HighBitrate:document.getElementById("high-bitrate-text").value,MinFPS:document.getElementById("min-fps-text").value};h(t),console.log(t)}}else{let e={PrioritiseQuality:0};h(e),console.log(e),l.onclick=null}});let s=document.getElementById("show-fps-button");null!==s&&(s.onclick=function(e){b({Console:"stat fps"})});let c=document.getElementById("btn-Toggle-voipSpeaker-list");null!==c&&(c.onclick=function(e){"none"!=document.getElementById("roster").style.display?(document.getElementById("roster").style.display="none",c.src="https://d35e1ftufisrhj.cloudfront.net/v1/assets/images/voipListNO.png"):(document.getElementById("flow-meeting").style.display="block",document.getElementById("roster").style.display="block",c.src="https://d35e1ftufisrhj.cloudfront.net/v1/assets/images/voipListYes.png")});let d=document.getElementById("match-viewport-res-tgl");null!==d&&(d.onchange=function(e){d.checked});let g=document.getElementById("show-stats-tgl");null!==g&&(g.onchange=function(e){document.getElementById("statsContainer").style.display=e.target.checked?"block":"none"});var m=document.getElementById("kickAllGuests");m&&(m.onclick=function(e){console.log("-> SS: kickAllGuests"),Ht.send(JSON.stringify({type:"kickAllGuests"}))});var f=document.getElementById("KickSelctedGuest");f&&(f.onclick=function(e){console.log("-> SS: KickSelctedGuest");var t=document.getElementById("Guest-filter"),n=t.options[t.selectedIndex].value;t.options[t.selectedIndex].text,Ht.send(JSON.stringify({type:"KickSelctedGuest",playerIDToKick:n}))});var p=document.getElementById("DisableControlFromOthers");p&&(p.onclick=function(e){console.log("-> SS: DisableControlFromOthers"),Ht.send(JSON.stringify({type:"DisableControlFromOthers"}))});var w=document.getElementById("GiveControlToThisGuest");w&&(w.onclick=function(e){console.log("-> SS: GiveControlToThisGuest");var t=document.getElementById("Guest-filter"),n=t.options[t.selectedIndex].value;t.options[t.selectedIndex].text,Ht.send(JSON.stringify({type:"GiveControlToThisGuest",GiveControlToThisGuestID:n}))});let S=document.getElementById("BandwidthCap_params_submit");S&&(S.onclick=function(e){In(document.getElementById("BandwidthCap_text").value)});let B=document.getElementById("FramerateCap_params_submit");B&&(B.onclick=function(e){kn(document.getElementById("FramerateCap_text").value)});let k=document.getElementById("editor-sidebar-closeBtn");k&&k.addEventListener("click",pn);let T=document.getElementById("printBtn");T&&T.addEventListener("click",yn);let C=document.getElementById("imageAssets");C&&C.addEventListener("change",(e=>{let t=e.target.value,n=document.getElementById("selectedImage");n.src=t,n.style.display="block"}));let x=document.getElementById("videoAssets");x&&x.addEventListener("change",(e=>{let t=e.target.value,n=document.getElementById("videoElem");n.style.display="none",n.setAttribute("src",t),n.load(),n.addEventListener("canplaythrough",(()=>{n.style.display="block"}))}));const O=document.getElementById("restartWebRtcButton");O&&O.addEventListener("click",(function(){F=1,U()}));let A=document.getElementById("ApplyBtn4setFramerateCap");A&&(A.onclick=function(e){kn(document.getElementById("setFramerateCap").value)});var P=document.getElementById("settings-button");P&&(P.onclick=function(e){if(console.log("-> SS: settingsButton"),1!=St("isE3DSEngineApp"))return console.warn("Engine version below 4.26. so skipping settingsButton VideoEncoderQP -> : "+L),void et("Engine version below 4.26. so skipping settingsButton VideoEncoderQP -> : "+L+(Math.random()*(.12-.02)+.02).toFixed(4),{timeout:2e3,color:"blue"});!function(){let e=document.getElementById("minBitrate").value,t=document.getElementById("maxBitrate").value,n=document.getElementById("resolution").value,o=(document.getElementById("minQP").value,document.getElementById("rateCtrl").value),i=(document.getElementById("minFPS").value,document.getElementById("backbuffersize").value,document.getElementById("quality").value);var a=JSON.stringify({type:"settings",data:{quality:i,minBitrate:e,maxBitrate:t,resolution:n,rateCtrl:o}});console.log("settingsButton--\x3e "+a),Ht.send(a)}()});var M=document.getElementById("ApplyMaxSettingsBtn");M&&(M.onclick=function(e){if(console.log("-> SS: ApplyMaxSettingsBtn"),1!=St("isE3DSEngineApp"))return console.warn("Engine version below 4.26. so skipping settingsButton VideoEncoderQP -> : "+L),void et("Engine version below 4.26. so skipping settingsButton VideoEncoderQP -> : "+L,{timeout:2e3,color:"blue"});var t=JSON.stringify({type:"settings",data:{minBitrate:2e7,maxBitrate:5e7,resolution:"1920x1080",minQP:1,rateCtrl:"CBR",minFPS:60,backbuffersize:1}});console.log("ApplyMaxSettingsBtn -> SS: "+t),Ht.send(t)});var D=document.getElementById("ApplyMidSettingsBtn");D&&(D.onclick=function(e){if(console.log("-> SS: ApplyMidSettingsBtn"),1!=St("isE3DSEngineApp"))return console.error("Engine version below 4.26. so skipping ApplyMidSettingsBtn VideoEncoderQP -> : "+L),void et("Engine version below 4.26. so skipping ApplyMidSettingsBtn VideoEncoderQP -> : "+L);var t=JSON.stringify({type:"settings",data:{minBitrate:1e7,maxBitrate:25e6,resolution:"1280x720",minQP:30,rateCtrl:"VBR",minFPS:60,backbuffersize:1}});console.log("ApplyMidSettingsBtn -> SS: "+t),Ht.send(t)});var R=document.getElementById("ApplyMinSettingsBtn");R&&(R.onclick=function(e){if(console.log("-> SS: ApplyMinSettingsBtn"),1!=St("isE3DSEngineApp"))return console.warn("Engine version below 4.26. so skipping settingsButton VideoEncoderQP -> : "+L),void et("Engine version below 4.26. so skipping settingsButton VideoEncoderQP -> : "+L,{timeout:2e3,color:"blue"});var t=JSON.stringify({type:"settings",data:{minBitrate:4e6,maxBitrate:2e7,resolution:"800x640",minQP:50,rateCtrl:"VBR",minFPS:60,backbuffersize:1}});console.log("ApplyMinSettingsBtn -> SS: "+t),Ht.send(t)});let N=document.getElementById("ApplyBtn4setBandwidthCap");N&&(N.onclick=function(e){In(document.getElementById("setBandwidthCap").value)});let _=document.getElementById("ApplyBtn4Resulation");_&&(_.onclick=function(e){v(document.getElementById("ResulationX").value,document.getElementById("ResulationY").value)});let H=document.getElementById("ApplyBtn4Resulation_r");if(H&&(H.onclick=function(e){!function(e,t){let n={Console:"r.setres "+document.getElementById("ResulationX_r").value+"x"+document.getElementById("ResulationY_r").value+"w"};b(n),1==ue&&console.log(n)}()}),muteaudio=document.getElementById("muteaudio"),null!==muteaudio&&(muteaudio.onchange=function(e){qt&&Ht.send(JSON.stringify({type:"settings",mute:muteaudio.checked}))}),/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){let e=document.getElementById("fullscreen-img");e&&(e.style.display="none")}let q=document.getElementById("fullscreen-img");q&&(q.onclick=function(){Cn()});let V=document.getElementById("screenshot-img");V&&(V.onclick=function(){Mn()}),Pn("button_720p",1280,720),Pn("button_1080p",1920,1080),Pn("button_1440p",2560,1440),Pn("button_4K",3840,2160),Pn("button_8K",7680,4320);let j=document.getElementById("match-viewport-res-tgl");null!==j&&j.checked;let G=document.getElementById("ApplyBtn4setHighBitrate");G&&(G.onclick=function(e){let t=document.getElementById("setHighBitrate").value;capBpsCmd="Encoder.HighBitrate "+t;let n={Console:capBpsCmd};b(n),console.log(n)});let z=document.getElementById("ApplyBtn4setMaxBitrate");z&&(z.onclick=function(e){let t=document.getElementById("setMaxBitrate").value;capBpsCmd="Encoder.MaxBitrate "+t;let n={Console:capBpsCmd};b(n),console.log(n)});let X=document.getElementById("Volumebar");X&&(X.onchange=function(e){u(this.value)});let Q=document.getElementById("resoulbar");Q&&(Q.onchange=function(e){var t;t=this.value,console.log("setQP val: "+t),E({ConsoleCommand:"PixelStreaming.Encoder.MinQP "+t}),E({ConsoleCommand:"PixelStreaming.Encoder.MaxQP "+t})});let Y=document.getElementById("ApplyBtn4setUseBackBufferSize");Y&&(Y.onclick=function(e){let t=document.getElementById("setUseBackBufferSize").value;capBpsCmd="Encoder.UseBackBufferSize "+t;let n={Console:capBpsCmd};b(n),console.log(n)});let K=document.getElementById("ApplyBtn4setPrioritiseQuality");K&&(K.onclick=function(e){let t=document.getElementById("setPrioritiseQuality").value;capBpsCmd="Encoder.PrioritiseQuality "+t;let n={Console:capBpsCmd};b(n),console.log(n)});let Z=document.getElementById("ApplyBtn4setMinFPS");Z&&(Z.onclick=function(e){let t=document.getElementById("setMinFPS").value;capBpsCmd="Encoder.MinFPS "+t;let n={Console:capBpsCmd};b(n),console.log(n)});let ee=document.getElementById("ApplyBtn4setMinQP");ee&&(ee.onclick=function(e){let t=document.getElementById("setMinQP").value;capBpsCmd="Encoder.MinQP "+t;let n={Console:capBpsCmd};b(n),console.log(n)});let te=document.getElementById("ApplyBtn4setLowBitrate");te&&(te.onclick=function(e){let t=document.getElementById("setLowBitrate").value;capBpsCmd="Encoder.LowBitrate "+t;let n={Console:capBpsCmd};b(n),console.log(n)});let ne=document.getElementById("ApplyBtn4TargetSize");ne&&(ne.onclick=function(e){let t=document.getElementById("TargetSizeX").value,n=document.getElementById("TargetSizeY").value;capBpsCmd="Encoder.TargetSize "+t+"x"+n;let o={Console:capBpsCmd};b(o),console.log(o)});let oe=document.getElementById("ApplyBtn4setRateControl");oe&&(oe.onclick=function(e){var t=document.getElementById("RateControlMethod"),n=t.options[t.selectedIndex].value;t.options[t.selectedIndex].text,capBpsCmd="Encoder.RateControl "+n;let o={Console:capBpsCmd};b(o),console.log(o)});let ie=document.getElementById("encoder-params-submit");null!==ie&&(ie.onclick=function(e){for(var t=lt.versionString.split("."),n=[],o=0;o<t.length;o++){var i=parseInt(t[o],10);isNaN(i)||n.push(i)}console.log(n),n[0];let a=document.getElementById("encoder-min-qp-text").value,r=document.getElementById("encoder-max-qp-text").value;E({ConsoleCommand:"PixelStreaming.Encoder.MinQP "+a}),E({ConsoleCommand:"PixelStreaming.Encoder.MaxQP "+r})});let ae=document.getElementById("webrtc-params-submit");null!==ae&&(ae.onclick=function(e){$=!1,v(document.getElementById("webrtc-low-qp-text").value,document.getElementById("webrtc-high-qp-text").value)}),"function"==typeof onHtmlBind?onHtmlBind():console.log("not found onHtmlBind"),e3ds_controller.callbacks&&"function"==typeof e3ds_controller.callbacks.onHtmlBind?e3ds_controller.callbacks.onHtmlBind():console.log("not found e3ds_controller.callbacks.onHtmlBind")}(),null!=Ue.passwordToStart&&"undefined"!=Ue.passwordToStart&&""!=Ue.passwordToStart?(console.log("streamingVideo: ",document.getElementById("streamingVideo").style.display),console.log("videoPlayOverlay: ",document.getElementById("videoPlayOverlay").style.display),document.getElementById("videoPlayOverlay").style.display="none",document.getElementById("streamingVideo").style.display="none",(i=document.getElementById("popupForPasswordToStart"))&&(i.style.display="flex")):((i=document.getElementById("popupForPasswordToStart"))&&(i.style.display="none"),wo()),console.log("configurationObj for v5/v4/v6: "+JSON.stringify(Ue,null,"\t"))}}function wo(){!function(){if(console.log("videoToPlay: "+nt),nt.length>0){var e=document.getElementById("streamingVideo");if(e){et("Click in the video to enable audio",{color:"blue",timeout:1e4}),e.addEventListener("ended",(e=>{console.log("Video stopped either because 1) it was over, or 2) no further data is available."),function(){if(1==St("DoRandomSuffleInLoadingVideoAssets")){var e=(t=nt.length,Math.floor(Math.random()*(t-0))+0);mo(fo=e)}else++fo==nt.length?mo(fo=0):mo(fo);var t}()})),mo(0);var t=document.getElementById("e3ds_draggable");t&&(1==Ue.shouldDisplayContorlBar||null==Ue.shouldDisplayContorlBar?t.style.display="block":t.style.display="none")}}}(),go()}function So(){"use strict";if(at){if(!Ot)if(document.getElementById("InQueue_Text")&&bo("Requesting Available Slot",""),window.WebSocket=window.WebSocket||window.MozWebSocket,window.WebSocket){var e=ge.replace("http://","ws://").replace("https://","wss://");(oo=new WebSocket(e)).onerror=function(e){console.error(`ws4queue error: ${JSON.stringify(e)}`)},oo.onclose=function(e){console.warn(`ws4queue closed: ${JSON.stringify(e.code)} - ${e.reason}`),4e3!=e.code&&Ct&&!ot&&(ao+=1,console.log("ws4queueReconnec() reconnectAttempt:"+ao),oo=void 0,vo=!1,setTimeout(So(),4e3))},oo.onopen=function(e){var t;"v5"==ze||"v6"==ze?(null!=Ue&&ho(),null!=ft?Eo():(t=JSON.stringify({type:"getAppCOnfig",GuestMeetingId:ft,appName:pt,owner:fe,uInfo:ye,configName:yt,version:Ae,configurationObj:Ue,urlVersion:ze}),console.log(" ws.send(): "+t),tt(t,oo))):ho()},oo.onmessage=function(e){console.log(`<- SS: ${e.data}`);var t=JSON.parse(e.data);if("disconnectAndretryIn"===t.type){var n=document.getElementById("InQueue_Text");n&&(n.innerHTML="CCU Limit Reached. Trying Again in 10 sec"),Ot=!1,Ct=!1,oo.close(4e3,"disconnectAndretryIn"),clearInterval(io),io=setInterval((function(){window.location.reload()}),1e4)}else"ShowThisHtmlPage"===t.type?(Ot=!0,oo.close(4e3,"ShowThisHtmlPage"),self.location=t.htmlPage):"AppCOnfig"===t.type||"CallOnGettingAppCOnfig"===t.type?ho(t):"TakeuserDeviceInfo"===t.type?(Zt=t.userDeviceInfo,console.log(`userDeviceInfo : ${JSON.stringify(Zt)}`),console.log(" 1111111111111 useExtendedTyping > "+bt)):"sendIdentity"===t.type?go():"doApprequest"===t.type?Eo():"uInfo"===t.type?ye=t.uInfo:"ConnectPlayerTo"===t.type?function(e){ot=!0,Oe=e.appDownloadInfo,m({type:"stage2_deQueued"}),console.log("222222 <- SS_Queue: msg: "+JSON.stringify(e)),ro=!1,at=!1,oo&&oo.close(4e3,"preConnectssTasks"),console.log("extractValueFromUrl('videoToPlay') :"+nt),nt.length<=0&&eo(1),de(me=e.cirrusServer)}(t):"redirectTo11"===t.type?(m({type:"stage2_deQueued"}),console.log("222222 <- SS_Queue: msg.data.url: "+t.url),console.log("222222 <- SS_Queue: msg: "+JSON.stringify(t)),de(t.cirrusServer)):"UpdatePlayerWatingRank"===t.type?(console.log("1111111111111111111111 <- SS_Queue: UpdatePlayerWatingRank: "+t.Postion),nt.length<=0&&bo("In Queue",t.Postion)):"ShowAnimatedInfo"===t.type?zn(t.data.info):"showTextOverlay"===t.type?(console.log("showTextOverlay: "+t.data.info),et(t.data.info,{color:"blue"})):"printInConsoleOnly"===t.type?console.log("printInConsoleOnly: "+t.data.info):"ShowInfoInLines"===t.type?(et(t.data.info,{color:"blue"}),console.log("ShowInfoInLines: "+t.data.info)):"ShowE3ds_alert"===t.type&&(et(t.data.info,{color:"blue"}),console.log("ShowE3ds_alert: "+t.data.info))}}else alert("Your browser doesn't support WebSocket")}else console.log("onTrailCheckPassed() returninig bcz shouldTryToReconnectQueue: "+at)}function bo(e,t,n){var o=document.getElementById("queueNumberText"),i="";""!==n&&void 0!==n&&(i=i+'<nav > <a data-label="global-footer" href='+n+">upload</a> </nav>");var a=document.getElementById("InQueue_Text");a&&e&&(a.innerHTML=e),o&&(o.innerHTML=t,console.log("queueNumberText.innerHTM : "+i)),m({type:"QueueNumberUpdated",queuePosition:t})}function te(){if(ne){if(At)document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),At=!1;else{let e=document.documentElement;e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),screen.orientation.lock("landscape"),At=!0}clearInterval(Yt),clearTimeout(Kt),ne=!1}}function Eo(){if(oo&&oo.readyState===Gt){if(null==kt)return console.log("trying to doApprequest but clientInfo undefined"),void To();console.log("doing doApprequest");var e=void 0,t="appRequest";null!=ft&&(t="RequestToJoinMeeting"),null!=Ue?e={type:t,clientInfo:kt,href_emulated:ge,href:window.location.href,configName:yt,GuestMeetingId:ft,accessedTopLevelDomainName:Ke,url_searchParams:String(urlParams),configurationStr:Ge[2],userDeviceInfo:Zt,uInfo:ye,configuration:Ue,expireOn:Ue.expireOn,MouseControlScheme:Ue.MouseControlScheme,showWebrtcCtrlMenu:Ue.showWebrtcCtrlMenu,showPsControl:Ue.showPsControl,afkWarnTimeout:Ue.afkWarnTimeout,afkCloseTimeout:Ue.afkCloseTimeout,isAfkEnabled:Ue.isAfkEnabled,enableScreenshot:Ue.enableScreenshot,useExtendedTyping:Ue.useExtendedTyping,showbrowserMouse:Ue.showbrowserMouse,isAdminDebugging:Ue.isAdminDebugging,appName:Ue.appName,owner:fe,cmdLineArgs:Ue.exeLunchArgs,exeLunchArgs:Ue.exeLunchArgs,hostMeetingId:Ue.hostMeetingId,GuestMeetingId:ft,maxUserLimit:Ue.maxUserLimit,custom_html:Ue.custom_html}:(ge.replace(location.origin+"/","").replace(location.search,""),e={type:"appRequest",appName:St("appName"),owner:fe,configName:yt,clientInfo:kt,cmdLineArgs:St("cmdLineArgs"),hostMeetingId:St("hostMeetingId"),GuestMeetingId:ft,custom_html:St("custom_html"),onDemand:St("onDemand"),onDemandRegion:St("onDemandRegion"),maxUserLimit:St("maxUserLimit"),accessedTopLevelDomainName:Ke,url_searchParams:String(urlParams)});var n=JSON.stringify(e);console.log("--------------- ws4queue.send Json: "+n),oo.send(n)}else console.log("ws4queue not ready")}function C(e){null!=kt&&"undefined"!=kt||Io(JSON.parse(e))}function Bo(e){return Math.floor(Math.random()*e)}function Io(e){null==e.latitude&&(e.latitude="38.88",console.warn("latitude undefined .so setting latitude : "+e.latitude)),null==e.longitude&&(e.longitude="-120.88",console.warn("longitude undefined .so setting longitude : "+e.longitude)),kt={ip:e.ip,city:e.city,region:e.region_name,country_name:e.country,latitude:e.latitude,longitude:e.longitude,fullInfo:e},yo(),n(kt.latitude,kt.longitude),e.city,Bo(3333),uo(),oo&&oo.readyState===Gt&&Eo()}function ko(){Io({ip:"ahsanHackOnUnabletoGetIpInfo",city:"ahsanHackOnUnabletoGetIpInfo",region:"ahsanHackOnUnabletoGetIpInfo",country_name:"ahsanHackOnUnabletoGetIpInfo",latitude:void 0,longitude:void 0})}function To(e=0){if(void 0!==kt)return;const t=new XMLHttpRequest;t.onreadystatechange=function(){return 422===t.status?(console.log("collectLocationInfo() received 422 status code. Returning default clientInfo object."),void ko()):429===t.status?(console.log("collectLocationInfo() received 429 status code. Retrying after 2000ms."),null!=T&&clearTimeout(T),void(T=setTimeout(To,2e3,e))):void(""!==t.responseText&&void 0!==t.responseText&&200===t.status?(clearTimeout(T),C(t.responseText)):e<20?(console.log("CLI() retrying after 2000ms."),null!=T&&clearTimeout(T),T=setTimeout(To,2e3,e+1)):(console.log("collectLocationInfo() maximum retries exceeded."),ko()))},t.onerror=function(){console.log("collectLocationInfo()  xmlHttp.onerror ."),ko()},t.open("GET","https://ipgeolocation.abstractapi.com/v1/?api_key=667cb95019b04ea5beaa7c935dc5ce37",!0),t.send(null)}ne=!1,Number.prototype.clamp=function(e,t){return Math.min(Math.max(this,e),t)},T=void 0,k=0,To(),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".slider-toggler"),t=document.querySelector(".slider-content"),n=document.querySelector(".toggle-img-collapsed"),o=document.querySelector(".toggle-img-expanded");e&&(e.addEventListener("click",(function(){"0px"===t.style.width||""===t.style.width?t.style.width="auto":t.style.width="0px",n.style.display="none"===n.style.display?"block":"none",o.style.display="none"===o.style.display?"block":"none"})),e.click())}));const Co=()=>{e3ds_controller,e3ds_controller.main(e3ds_session_token,clientUserName)};async function xo(){try{var e=new XMLHttpRequest;e.withCredentials=!0,e.onreadystatechange=function(){if(e.readyState===XMLHttpRequest.DONE)if(200===e.status){var t=JSON.parse(e.responseText);"Signed"===t?.message&&(t.data.userinfo.userName,console.log("Logged in user data: "+JSON.stringify(t.data)),ve=t.data)}else console.error("Error:",e.statusText)},e.open("GET","https://auth-restful.eagle3dstreaming.com/api/v2/session/state"),e.send()}catch(e){"Unsigned"===e?.response?.data?.message?null!=Ue.UseMicrophone&&1==he&&(window.location.href=`https://auth-fe.eagle3dstreaming.com/signin?redirect=${window.location.href}`):console.error(e)}}window.onload111=function(){if(window.addEventListener("touchend",ee),window.addEventListener("mouseup",ee),"undefined"!=typeof e3ds_controller)Co();else{console.error("e3ds_controller not found");let e=setInterval((()=>{"undefined"!=typeof e3ds_controller?(clearInterval(e),Co()):console.error("e3ds_controller not found")}),100)}},window.onload=async function(){if(window.addEventListener("touchend",ee),window.addEventListener("mouseup",ee),xo(),"undefined"!=typeof e3ds_controller)Co();else{console.error("e3ds_controller not found");let e=setInterval((()=>{"undefined"!=typeof e3ds_controller?(clearInterval(e),Co()):console.error("e3ds_controller not found")}),100)}}})();